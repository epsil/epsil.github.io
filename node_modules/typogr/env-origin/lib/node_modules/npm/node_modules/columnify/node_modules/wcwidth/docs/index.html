<!DOCTYPE html>
<html lang="no" prefix="og: http://ogp.me/ns#">
<head>
<title>
</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta content="no-referrer" name="referrer">
<meta content="noindex" name="robots">
<meta content="Vegard &#216;ye" name="author">
<meta content="92698a497d9c481b330e1c9c158a7979" name="md5">
<meta content="text/css" http-equiv="Content-Style-Type">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="Vegard &#216;ye" name="DC.Creator">
<meta content="no" name="DC.Language">
<meta content="text/html" name="DC.Format">
<meta content="no" name="og:locale">
<meta content="article" property="og:type">
<meta content="https://epsil.github.io/node_modules/typogr/env-origin/lib/node_modules/npm/node_modules/columnify/node_modules/wcwidth/docs/" property="og:url">
<meta content="Vegards blogg" property="og:site_name">
<meta content="summary" name="twitter:card">
<meta content="@github" name="twitter:site">
<link href="../../../../../../../../../../../favicon.ico" rel="icon" type="image/x-icon">
<link href="../../../../../../../../../../../apple-touch-icon.png" rel="apple-touch-icon">
<link href="../../../../../../../../../../../_assets/css/wiki.css" rel="stylesheet">
<link href="index.md" rel="alternate" title="Markdown" type="text/markdown">
<script src="../../../../../../../../../../../_assets/js/wiki.js">
</script>
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top">
<div class="container-fluid topbar">
<ul class="nav nav-pills navbar-left">
<li role="presentation"><a href="../../../../../../../../../../../" title="G&#229; hjem"><i class="fa fa-home"></i></a>
</li>
</ul>

<ul class="nav nav-pills navbar-right">
<li role="presentation"><a href="../../../../../../../../../../../tmp/clipboard/" target="_blank" title="Kopier til Markdown"><span class="clipboard-logo"></span></a>
</li>

<li role="presentation"><a href="https://github.com/epsil/epsil.github.io/blob/master/node_modules/typogr/env-origin/lib/node_modules/npm/node_modules/columnify/node_modules/wcwidth/docs/index.md" target="_blank" title="Vis p&#229; GitHub"><i class="fa fa-github"></i></a>
</li>

<li role="presentation"><a href="https://github.com/epsil/epsil.github.io/edit/master/node_modules/typogr/env-origin/lib/node_modules/npm/node_modules/columnify/node_modules/wcwidth/docs/index.md" target="_blank" title="Rediger p&#229; GitHub"><i class="fa fa-edit"></i></a>
</li>

<li role="presentation"><a href="https://github.com/epsil/epsil.github.io/raw/master/node_modules/typogr/env-origin/lib/node_modules/npm/node_modules/columnify/node_modules/wcwidth/docs/index.md" target="_blank" title="Vis Markdown-kilde" type="text/plain"><span class="markdown-mark"></span></a>
</li>

<li role="presentation"><a data-toggle="collapse" href="#toc" id="toc-button" title="Innhold"><i class="fa fa-list"></i></a>
</li>
</ul>

<form action="https://www.google.com/search" class="navbar-form" method="get" target="_blank">
<div class="form-group" style="display: inline;">
<div class="input-group" style="display: table;"><span class="input-group-addon" style="width: 1%;"><span class="glyphicon glyphicon-search"></span></span> <input accesskey="." autocomplete="off" class="form-control" name="q" title="S&#248;k" type="text"></div>
</div>
</form>
</div>

<div class="collapse" id="toc">
<ul>
<li><a href="#javascript-porting-of-markus-kuhns-wcwidth-implementation" title="Javascript porting of Markus Kuhn&#8217;s wcwidth() implementation">Javascript porting of Markus Kuhn&#8217;s wcwidth() implementation</a>
</li>
</ul>
</div>
</nav>

<article class="h-entry" id="main">
<header>
</header>

<section class="e-content sidenotes">
<section id="javascript-porting-of-markus-kuhns-wcwidth-implementation">
<h3><a aria-hidden="true" class="header-anchor" href="#javascript-porting-of-markus-kuhns-wcwidth-implementation" title="Javascript porting of Markus Kuhn&#8217;s wcwidth() implementation"></a>Javascript porting of Markus Kuhn&#8217;s wcwidth() implementation<a aria-controls="javascript-porting-of-markus-kuhns-wcwidth-implementation-section" aria-expanded="true" aria-hidden="true" class="collapse-button" data-toggle="collapse" href="#javascript-porting-of-markus-kuhns-wcwidth-implementation-section" role="button"></a><a aria-hidden="true" class="collapse-ellipsis" href="#"></a></h3>

<div class="collapse in" id="javascript-porting-of-markus-kuhns-wcwidth-implementation-section">
<p>The following explanation comes from the original C implementation:</p>

<p>This is an implementation of wcwidth() and wcswidth() (defined in<br>
<span class="caps">IEEE</span> Std 1002.1-2001) for Unicode.</p>

<p><a class="url" href="http://www.opengroup.org/onlinepubs/007904975/functions/wcwidth.html" target="_blank" title="Open opengroup.org in a new window">http://www.opengroup.org/onlinepubs/007904975/functions/wcwidth.html</a><br>
<a class="url" href="http://www.opengroup.org/onlinepubs/007904975/functions/wcswidth.html" target="_blank" title="Open opengroup.org in a new window">http://www.opengroup.org/onlinepubs/007904975/functions/wcswidth.html</a>
</p>

<p>In fixed-width output devices, Latin characters all occupy a single<br>
&#8220;cell&#8221; position of equal width, whereas ideographic <span class="caps">CJK</span> characters<br>
occupy two such cells. Interoperability between terminal-line<br>
applications and (teletype-style) character terminals using the<br>
<span class="caps">UTF</span>-8 encoding requires agreement on which character should advance<br>
the cursor by how many cell positions. No established formal<br>
standards exist at present on which Unicode character shall occupy<br>
how many cell positions on character terminals. These routines are<br>
a first attempt of defining such behavior based on simple rules<br>
applied to data provided by the Unicode Consortium.</p>

<p>For some graphical characters, the Unicode standard explicitly<br>
defines a character-cell width via the definition of the East Asian<br>
FullWidth (F), Wide (W), Half-width (H), and Narrow (Na) classes.<br>
In all these cases, there is no ambiguity about which width a<br>
terminal shall use. For characters in the East Asian Ambiguous (A)<br>
class, the width choice depends purely on a preference of backward<br>
compatibility with either historic <span class="caps">CJK</span> or Western practice.<br>
Choosing single-width for these characters is easy to justify as<br>
the appropriate long-term solution, as the <span class="caps">CJK</span> practice of<br>
displaying these characters as double-width comes from historic<br>
implementation simplicity (8-bit encoded characters were displayed<br>
single-width and 16-bit ones double-width, even for Greek,<br>
Cyrillic, <abbr title="et cetera">etc.</abbr>) and not any typographic considerations.</p>

<p>Much less clear is the choice of width for the Not East Asian<br>
(Neutral) class. Existing practice does not dictate a width for any<br>
of these characters. It would nevertheless make sense<br>
typographically to allocate two character cells to characters such<br>
as for instance <span class="caps">EM</span> <span class="caps">SPACE</span> or <span class="caps">VOLUME</span> <span class="caps">INTEGRAL</span>, which cannot be<br>
represented adequately with a single-width glyph. The following<br>
routines at present merely assign a single-cell width to all<br>
neutral characters, in the interest of simplicity. This is not<br>
entirely satisfactory and should be reconsidered before<br>
establishing a formal standard in this area. At the moment, the<br>
decision which Not East Asian (Neutral) characters should be<br>
represented by double-width glyphs cannot yet be answered by<br>
applying a simple rule from the Unicode database content. Setting<br>
up a proper standard for the behavior of <span class="caps">UTF</span>-8 character terminals<br>
will require a careful analysis not only of each Unicode character,<br>
but also of each presentation form, something the author of these<br>
routines has avoided to do so far.</p>

<p><a class="url" href="http://www.unicode.org/unicode/reports/tr11/" target="_blank" title="Open unicode.org in a new window">http://www.unicode.org/unicode/reports/tr11/</a>
</p>

<p>Markus Kuhn &#8211; 2007-05-26 (Unicode 5.0)</p>

<p>Permission to use, copy, modify, and distribute this software<br>
for any purpose and without fee is hereby granted. The author<br>
disclaims all warranties with regard to this software.</p>

<p>Latest version: <a class="url" href="http://www.cl.cam.ac.uk/~mgk25/ucs/wcwidth.c" target="_blank" title="Open cl.cam.ac.uk in a new window">http://www.cl.cam.ac.uk/~mgk25/ucs/wcwidth.c</a></p>
</div>
</section>
</section>
</article>
</body>
</html>
