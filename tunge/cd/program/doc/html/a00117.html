<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Virtual Arm for Impaired: sensors.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>sensors.h</h1><a href="a00032.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*This file has been prepared for Doxygen automatic documentation generation.*/</span><span class="comment"></span>
<a name="l00002"></a>00002 <span class="comment">//! \file *********************************************************************</span>
<a name="l00003"></a>00003 <span class="comment">//!</span>
<a name="l00004"></a>00004 <span class="comment">//! \brief  This file contains macros needed by sensors.c, as well as</span>
<a name="l00005"></a>00005 <span class="comment">//!         prototypes for all its functions.</span>
<a name="l00006"></a>00006 <span class="comment">//!</span>
<a name="l00007"></a>00007 <span class="comment">//! \author Vegard Ã˜ye</span>
<a name="l00008"></a>00008 <span class="comment">//!</span>
<a name="l00009"></a>00009 <span class="comment">//! ***************************************************************************</span>
<a name="l00010"></a>00010 <span class="comment"></span>
<a name="l00011"></a>00011 <span class="comment">//_____  I N C L U D E S ______________________________________________________</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#include "<a class="code" href="a00021.html" title="This file contains the system configuration definition.">config.h</a>"</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include "<a class="code" href="a00016.html" title="This file contains the low level macros and definition for the ADC.">lib_mcu/adc/adc_drv.h</a>"</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="comment">//_____ M A C R O S ___________________________________________________________</span>
<a name="l00017"></a>00017 
<a name="l00018"></a>00018 <span class="comment">// Originally defined in mouse_task.c.</span>
<a name="l00019"></a>00019 <span class="comment">// MOUSE_SPEED is defined in config.h.</span>
<a name="l00020"></a><a class="code" href="a00032.html#ca592558696861c5d30d817d7dbd9ce3">00020</a> <span class="preprocessor">#define Hid_mouse_report_up()            (g_hid_mouse_report[2] -= MOUSE_SPEED)</span>
<a name="l00021"></a><a class="code" href="a00032.html#86eb00c37321910a023420324e69e196">00021</a> <span class="preprocessor"></span><span class="preprocessor">#define Hid_mouse_report_down()          (g_hid_mouse_report[2] += MOUSE_SPEED)</span>
<a name="l00022"></a><a class="code" href="a00032.html#9a8134c73937e59b34940cffa6936bb3">00022</a> <span class="preprocessor"></span><span class="preprocessor">#define Hid_mouse_report_left()          (g_hid_mouse_report[1] -= MOUSE_SPEED)</span>
<a name="l00023"></a><a class="code" href="a00032.html#2f287b7fd7d40b5d73e7135abdc9f945">00023</a> <span class="preprocessor"></span><span class="preprocessor">#define Hid_mouse_report_right()         (g_hid_mouse_report[1] += MOUSE_SPEED)</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span>
<a name="l00025"></a><a class="code" href="a00032.html#c35d2840ae039a21de5c0c7528ab593e">00025</a> <span class="preprocessor">#define Hid_mouse_report_scroll_up()     (g_hid_mouse_report[3] += MOUSE_SPEED)</span>
<a name="l00026"></a><a class="code" href="a00032.html#a193119d93b0cfe4bd58d874d885019f">00026</a> <span class="preprocessor"></span><span class="preprocessor">#define Hid_mouse_report_scroll_down()   (g_hid_mouse_report[3] -= MOUSE_SPEED)</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span>
<a name="l00028"></a><a class="code" href="a00032.html#a017379c0ad4aab648b15c7f3bce6a82">00028</a> <span class="preprocessor">#define Hid_mouse_report_click_left()    (g_hid_mouse_report[0] |= 0x01)</span>
<a name="l00029"></a><a class="code" href="a00032.html#e3a8b60b1e5019d3ad3c3ae3e027e39f">00029</a> <span class="preprocessor"></span><span class="preprocessor">#define Hid_mouse_report_click_right()   (g_hid_mouse_report[0] |= 0x02)</span>
<a name="l00030"></a><a class="code" href="a00032.html#a32099094cba2f7fec6bfcce4a032574">00030</a> <span class="preprocessor"></span><span class="preprocessor">#define Hid_mouse_report_click_middle()  (g_hid_mouse_report[0] |= 0x04)</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span>
<a name="l00032"></a><a class="code" href="a00032.html#f4e0ff6e7ee8f0325d39437c22a19134">00032</a> <span class="preprocessor">#define Hid_mouse_report_reset()         (g_hid_mouse_report[0] = 0, \</span>
<a name="l00033"></a>00033 <span class="preprocessor">                                          g_hid_mouse_report[1] = 0, \</span>
<a name="l00034"></a>00034 <span class="preprocessor">                                          g_hid_mouse_report[2] = 0, \</span>
<a name="l00035"></a>00035 <span class="preprocessor">                                          g_hid_mouse_report[3] = 0)</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="comment">// List of sensors.</span>
<a name="l00037"></a><a class="code" href="a00032.html#78ced0ef04bf38399a1a312575dc20a5">00037</a> <span class="preprocessor">#define NO_SENSOR         0</span>
<a name="l00038"></a><a class="code" href="a00032.html#64dba89518948116df90bc847597a8aa">00038</a> <span class="preprocessor"></span><span class="preprocessor">#define UP_SENSOR         1</span>
<a name="l00039"></a><a class="code" href="a00032.html#a953bc212d4fe4274d23c0e9c2f5459f">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define LEFT_SENSOR       2</span>
<a name="l00040"></a><a class="code" href="a00032.html#16433c75f0d3615fe60d59ec8a86834a">00040</a> <span class="preprocessor"></span><span class="preprocessor">#define TEMP_SENSOR       3</span>
<a name="l00041"></a><a class="code" href="a00032.html#bbe9f6a700620d390c0c7706e1240d48">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define RIGHT_SENSOR      4</span>
<a name="l00042"></a><a class="code" href="a00032.html#332db1b59b10467f031e40272990e35e">00042</a> <span class="preprocessor"></span><span class="preprocessor">#define DOWN_SENSOR       5</span>
<a name="l00043"></a><a class="code" href="a00032.html#562cb1ec1ebc082a83b31baf6ec92d2e">00043</a> <span class="preprocessor"></span><span class="preprocessor">#define RCLICK_SENSOR     6</span>
<a name="l00044"></a><a class="code" href="a00032.html#e13a1cb039cbdec7ecc6c233ef3865a0">00044</a> <span class="preprocessor"></span><span class="preprocessor">#define LCLICK_SENSOR     7</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00046"></a>00046 <span class="comment">// List of states.</span>
<a name="l00047"></a><a class="code" href="a00032.html#f93d7c80faa6ebd086460cde2d5dd27e">00047</a> <span class="preprocessor">#define DEFAULT_STATE     0</span>
<a name="l00048"></a><a class="code" href="a00032.html#d68e8afdf0f54f4928ee5e11692b9664">00048</a> <span class="preprocessor"></span><span class="preprocessor">#define MOV_COUNT_STATE   1</span>
<a name="l00049"></a><a class="code" href="a00032.html#c9dfa06a967280678e0b99fe1d516087">00049</a> <span class="preprocessor"></span><span class="preprocessor">#define MOV_PRESS_STATE   2</span>
<a name="l00050"></a><a class="code" href="a00032.html#fbc520206b5ab650b17af7ec2fc85528">00050</a> <span class="preprocessor"></span><span class="preprocessor">#define MOV_TOUCH_STATE   3</span>
<a name="l00051"></a><a class="code" href="a00032.html#a99a37eb56424da7784084bff3c523e1">00051</a> <span class="preprocessor"></span><span class="preprocessor">#define BUTTON_WAIT_STATE 4</span>
<a name="l00052"></a><a class="code" href="a00032.html#45a5ea2080280529d25b1abcfd0b4e17">00052</a> <span class="preprocessor"></span><span class="preprocessor">#define SCROLL_STATE      5</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span>
<a name="l00054"></a>00054 <span class="comment">// DEBUG is defined in config.h.</span>
<a name="l00055"></a>00055 <span class="comment">// Do check since channels 4-7 are, quite inconveniently, used by JTAG.</span>
<a name="l00056"></a>00056 <span class="preprocessor">#if (DEBUG == 1)</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span><span class="preprocessor">    #define    ADC_START_CHANNEL  1</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span><span class="preprocessor">    #define    ADC_END_CHANNEL    3</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00060"></a><a class="code" href="a00032.html#5d672e9c49625a34829d15aafa6d3d40">00060</a> <span class="preprocessor"></span><span class="preprocessor">    #define    ADC_START_CHANNEL  1</span>
<a name="l00061"></a><a class="code" href="a00032.html#90d02b0217fe30b09530ce65e66bcf38">00061</a> <span class="preprocessor"></span><span class="preprocessor">    #define    ADC_END_CHANNEL    7</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span>
<a name="l00064"></a>00064 <span class="comment">// Step values, derived through experimentation.</span>
<a name="l00065"></a><a class="code" href="a00032.html#70be2dc5c8bdc85b027ea6118753cca1">00065</a> <span class="preprocessor">#define STEP   ((U8)0x04)</span>
<a name="l00066"></a><a class="code" href="a00032.html#d6138f70b4a60e8b031ce44d728a898d">00066</a> <span class="preprocessor"></span><span class="preprocessor">#define STEP2  ((U8)0x15)</span>
<a name="l00067"></a><a class="code" href="a00032.html#b18e271c15239d703ae778766b25c5f5">00067</a> <span class="preprocessor"></span><span class="preprocessor">#define STEP3  ((U8)0x50)</span>
<a name="l00068"></a><a class="code" href="a00032.html#43fdcab6f1ea325d70bc60eb117f394c">00068</a> <span class="preprocessor"></span><span class="preprocessor">#define STEP4  ((U8)0x80)</span>
<a name="l00069"></a><a class="code" href="a00032.html#6a5141a5b791207c196a290690e75652">00069</a> <span class="preprocessor"></span><span class="preprocessor">#define STEP5  ((U8)0xB0)</span>
<a name="l00070"></a><a class="code" href="a00032.html#0855d9ea88a153808c46bb71684ff525">00070</a> <span class="preprocessor"></span><span class="preprocessor">#define STEP6  ((U8)0xFF)</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span>
<a name="l00072"></a>00072 <span class="comment">//_____ D E C L A R A T I O N S ____________________________________________</span>
<a name="l00073"></a>00073 
<a name="l00074"></a>00074 bit  <a class="code" href="a00031.html#2f0bcb9627f1e230574ec5e01d14b175" title="This function checks the board interface and fills the HID mouse report.">is_mouse_event</a>      (<span class="keywordtype">void</span>);
<a name="l00075"></a>00075 bit  <a class="code" href="a00031.html#a7e99e80bf89549606e6fe10de83fde9" title="This function defines state 0: Default State.">Default_func</a>        (<span class="keywordtype">void</span>);
<a name="l00076"></a>00076 bit  <a class="code" href="a00031.html#dbdce8d89d02f7a148d2b166d94eea9d" title="This function defines state 1: Movement Countdown State.">Mov_count_func</a>      (<span class="keywordtype">void</span>);
<a name="l00077"></a>00077 bit  <a class="code" href="a00031.html#55bdc319254e6ad2b98b2b988def4718" title="This function defines state 2: Movement Press State.">Mov_press_func</a>      (<span class="keywordtype">void</span>);
<a name="l00078"></a>00078 bit  <a class="code" href="a00031.html#e960f26d1f6df6d487075ccb69ca5b49" title="This function defines state 3: Movement Touch State.">Mov_touch_func</a>      (<span class="keywordtype">void</span>);
<a name="l00079"></a>00079 bit  <a class="code" href="a00031.html#f38325cb4a238445fadbe32d01dd0d4d" title="This function defines state 4: Button Wait State.">Button_wait_func</a>    (<span class="keywordtype">void</span>);
<a name="l00080"></a>00080 bit  <a class="code" href="a00031.html#fdfbcc5955efa378300cbac70a9ce696" title="This function defines state 5: Scroll State.">Scroll_func</a>         (<span class="keywordtype">void</span>);
<a name="l00081"></a>00081 bit  <a class="code" href="a00031.html#0b07a12ced7bddabebb3979434784dd6" title="This function slows the cursor down if Slow_cursor is TRUE.">Maybe_slow_cursor</a>   (<span class="keywordtype">void</span>);
<a name="l00082"></a>00082 bit  <a class="code" href="a00031.html#89860b11fe875495bc114b044067a39d" title="This function holds down the left button if Left_holddown is TRUE.">Maybe_left_holddown</a> (<span class="keywordtype">void</span>);
<a name="l00083"></a>00083 bit  <a class="code" href="a00031.html#674791a51be825a2da83277901b855a8" title="This function checks whether a sensor is a movement sensor.">is_movement_sensor</a>  (<a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor);
<a name="l00084"></a>00084 bit  <a class="code" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor.">is_button_sensor</a>    (<a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor);
<a name="l00085"></a>00085 <a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>   <a class="code" href="a00031.html#0905451249f7232009067289cab474d1" title="This function reads the chosen ADC channel.">adc_reader</a>          (<a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> channel);
<a name="l00086"></a>00086 <span class="keywordtype">void</span> <a class="code" href="a00031.html#8381dd74c2f529168d12a9c266c376f9" title="This function updates Invalue.">Read_sensors</a>        (<span class="keywordtype">void</span>);
<a name="l00087"></a>00087 <span class="keywordtype">void</span> <a class="code" href="a00031.html#c8ec403b244267ecd7c29fd6620076e3" title="This function updates Zerovalue by copying Invalue.">Calibrate</a>           (<span class="keywordtype">void</span>);
<a name="l00088"></a>00088 bit  <a class="code" href="a00031.html#66b43c3777dd3281045111a0da769b07" title="This function checks whether a sensor&amp;#39;s value is larger than a given step threshold...">is_sensor_step</a>      (<a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor, <a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> step);
<a name="l00089"></a>00089 bit  <a class="code" href="a00031.html#e647770a880b2f57f210aaeb58b5ccf4" title="This function checks whether a sensor if active.">is_sensor_active</a>    (<a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor);
<a name="l00090"></a>00090 bit  <a class="code" href="a00031.html#35f3e8756189454e8a79ecb6ab01b247" title="This function checks which sensor is more active.">is_more_active</a>      (<a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> upper, <a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> lower);
<a name="l00091"></a>00091 <a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>   <a class="code" href="a00031.html#caca6743f95a33743918a890a7dcdccd" title="This function runs through the read sensor values and returns the most active sensor...">find_active_sensor</a>  (<span class="keywordtype">void</span>);
<a name="l00092"></a>00092 <a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>   <a class="code" href="a00031.html#013506ab65ac6a2b6c4884caf7b409fa" title="This function returns an active nearby sensor, if any.">check_nearby_sensor</a> (<a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor);
<a name="l00093"></a>00093 <span class="keywordtype">void</span> <a class="code" href="a00031.html#e17490447c5f3a64df8bf1485553dc08" title="This function re-calibrates a hanging sensor by checking opposite cheek.">Check_hang</a>          (<a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor);
<a name="l00094"></a>00094 <span class="keywordtype">void</span> <a class="code" href="a00031.html#3f0f020fe6f952f09853eae164d82745" title="This function checks sensor pressure for speed increase.">Inc_speed</a>           (<a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor);
<a name="l00095"></a>00095 <span class="keywordtype">void</span> <a class="code" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report.">Modify_report</a>       (<a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor);
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sun May 24 22:43:02 2009 for Virtual Arm for Impaired by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
