<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Virtual Arm for Impaired: sensors.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>sensors.c File Reference</h1>This file contains all sensor code.  
<a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="a00117.html">sensors.h</a>&quot;</code><br>

<p>
<div class="dynheader">
Include dependency graph for sensors.c:</div>
<div class="dynsection">
<p><center><img src="a00154.png" border="0" usemap="#sensors.c_map" alt=""></center>
<map name="sensors.c_map">
<area shape="rect" href="a00032.html" title="This file contains macros needed by sensors.c, as well as prototypes for all its..." alt="" coords="5,80,83,107"></map>
</div>

<p>
<a href="a00116.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#2f0bcb9627f1e230574ec5e01d14b175">is_mouse_event</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function checks the board interface and fills the HID mouse report.  <a href="#2f0bcb9627f1e230574ec5e01d14b175"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#a7e99e80bf89549606e6fe10de83fde9">Default_func</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function defines state 0: Default State.  <a href="#a7e99e80bf89549606e6fe10de83fde9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#dbdce8d89d02f7a148d2b166d94eea9d">Mov_count_func</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function defines state 1: Movement Countdown State.  <a href="#dbdce8d89d02f7a148d2b166d94eea9d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#55bdc319254e6ad2b98b2b988def4718">Mov_press_func</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function defines state 2: Movement Press State.  <a href="#55bdc319254e6ad2b98b2b988def4718"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#e960f26d1f6df6d487075ccb69ca5b49">Mov_touch_func</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function defines state 3: Movement Touch State.  <a href="#e960f26d1f6df6d487075ccb69ca5b49"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#f38325cb4a238445fadbe32d01dd0d4d">Button_wait_func</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function defines state 4: Button Wait State.  <a href="#f38325cb4a238445fadbe32d01dd0d4d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#fdfbcc5955efa378300cbac70a9ce696">Scroll_func</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function defines state 5: Scroll State.  <a href="#fdfbcc5955efa378300cbac70a9ce696"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#0b07a12ced7bddabebb3979434784dd6">Maybe_slow_cursor</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function slows the cursor down if <a class="el" href="a00031.html#43240271fe4632556d26ed52f17d8b2c" title="If TRUE, cursor speed may be decreased by skipping tasks.">Slow_cursor</a> is <a class="el" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>.  <a href="#0b07a12ced7bddabebb3979434784dd6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#89860b11fe875495bc114b044067a39d">Maybe_left_holddown</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function holds down the left button if <a class="el" href="a00031.html#38eef1a947197d9e2517c1877aca50ca" title="If TRUE, the left mouse button is held down.">Left_holddown</a> is <a class="el" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>.  <a href="#89860b11fe875495bc114b044067a39d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#674791a51be825a2da83277901b855a8">is_movement_sensor</a> (<a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function checks whether a sensor is a movement sensor.  <a href="#674791a51be825a2da83277901b855a8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#f69836438397c47cde6e849fc2a158a6">is_button_sensor</a> (<a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function checks whether a sensor is a button sensor.  <a href="#f69836438397c47cde6e849fc2a158a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#0905451249f7232009067289cab474d1">adc_reader</a> (<a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> channel)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function reads the chosen ADC channel.  <a href="#0905451249f7232009067289cab474d1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#8381dd74c2f529168d12a9c266c376f9">Read_sensors</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function updates <a class="el" href="a00031.html#48842f777afc873552e3370cef79ec5b" title="Read values of sensors, to be compared against the calibration values.">Invalue</a>.  <a href="#8381dd74c2f529168d12a9c266c376f9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#c8ec403b244267ecd7c29fd6620076e3">Calibrate</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function updates <a class="el" href="a00031.html#c6a72d9ad60e64ca3bb25f0cbbb774eb" title="Calibration values of sensors (i.e., reference level).">Zerovalue</a> by copying <a class="el" href="a00031.html#48842f777afc873552e3370cef79ec5b" title="Read values of sensors, to be compared against the calibration values.">Invalue</a>.  <a href="#c8ec403b244267ecd7c29fd6620076e3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#66b43c3777dd3281045111a0da769b07">is_sensor_step</a> (<a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor, <a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> step)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function checks whether a sensor's value is larger than a given step threshold, relative to <a class="el" href="a00031.html#c6a72d9ad60e64ca3bb25f0cbbb774eb" title="Calibration values of sensors (i.e., reference level).">Zerovalue</a>.  <a href="#66b43c3777dd3281045111a0da769b07"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#e647770a880b2f57f210aaeb58b5ccf4">is_sensor_active</a> (<a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function checks whether a sensor if active.  <a href="#e647770a880b2f57f210aaeb58b5ccf4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#35f3e8756189454e8a79ecb6ab01b247">is_more_active</a> (<a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> upper, <a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> lower)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function checks which sensor is more active.  <a href="#35f3e8756189454e8a79ecb6ab01b247"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#caca6743f95a33743918a890a7dcdccd">find_active_sensor</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function runs through the read sensor values and returns the most active sensor, if any.  <a href="#caca6743f95a33743918a890a7dcdccd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#013506ab65ac6a2b6c4884caf7b409fa">check_nearby_sensor</a> (<a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function returns an active nearby sensor, if any.  <a href="#013506ab65ac6a2b6c4884caf7b409fa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#e17490447c5f3a64df8bf1485553dc08">Check_hang</a> (<a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function re-calibrates a hanging sensor by checking opposite cheek.  <a href="#e17490447c5f3a64df8bf1485553dc08"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#3f0f020fe6f952f09853eae164d82745">Inc_speed</a> (<a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function checks sensor pressure for speed increase.  <a href="#3f0f020fe6f952f09853eae164d82745"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a">Modify_report</a> (<a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function modifies <a class="el" href="a00031.html#90be438f7330dcc64cb9b12824967282" title="Mouse report, defined in mouse_task.c.">g_hid_mouse_report</a>.  <a href="#03f1a96bde8ea4ceca60f9eba847a16a"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#2ccc1fbc024e60b4049c657ce6bd7a35">State</a> = DEFAULT_STATE</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">State variable, to memorize across tasks.  <a href="#2ccc1fbc024e60b4049c657ce6bd7a35"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00018.html#df928e51a60dba0df29d615401cc55a8">U16</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#e3ca45f5ff481979b317a3b40983733b">State_counter</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generic global counter to stay in a state a number of tasks.  <a href="#e3ca45f5ff481979b317a3b40983733b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#43240271fe4632556d26ed52f17d8b2c">Slow_cursor</a> = FALSE</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If <a class="el" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, cursor speed may be decreased by skipping tasks.  <a href="#43240271fe4632556d26ed52f17d8b2c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#38eef1a947197d9e2517c1877aca50ca">Left_holddown</a> = FALSE</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If <a class="el" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, the left mouse button is held down.  <a href="#38eef1a947197d9e2517c1877aca50ca"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#21281dc357d62eae122bb6d780b25b13">Report_filled</a> = FALSE</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If <a class="el" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, there is a mouse event.  <a href="#21281dc357d62eae122bb6d780b25b13"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#90be438f7330dcc64cb9b12824967282">g_hid_mouse_report</a> [4]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mouse report, defined in <a class="el" href="a00024.html" title="This file manages the Mouse task.">mouse_task.c</a>.  <a href="#90be438f7330dcc64cb9b12824967282"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#c6a72d9ad60e64ca3bb25f0cbbb774eb">Zerovalue</a> [8] = {0}</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calibration values of sensors (i.e., reference level).  <a href="#c6a72d9ad60e64ca3bb25f0cbbb774eb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#48842f777afc873552e3370cef79ec5b">Invalue</a> [8] = {0}</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read values of sensors, to be compared against the calibration values.  <a href="#48842f777afc873552e3370cef79ec5b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195">Active_sensor</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of currently active sensor.  <a href="#a3cb539a046895f24e2a0af5b0a8f195"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#382ed155add7cd1d241a70201202e074">Neighbor_sensor</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of active neighbor sensor.  <a href="#382ed155add7cd1d241a70201202e074"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bit&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00031.html#d8076098b8685739db77e1ccbe58d8aa">Nearby_sensors</a> [8][8]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Matrix of adjacent sensors.  <a href="#d8076098b8685739db77e1ccbe58d8aa"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file contains all sensor code. 
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Bastian S. Solem and Vegard Øye </dd></dl>

<p>Definition in file <a class="el" href="a00116.html">sensors.c</a>.</p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="2f0bcb9627f1e230574ec5e01d14b175"></a><!-- doxytag: member="sensors.c::is_mouse_event" ref="2f0bcb9627f1e230574ec5e01d14b175" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit is_mouse_event           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function checks the board interface and fills the HID mouse report. 
<p>
Divided into <em>states</em> to remember things across tasks. The current state is represented by the global variable <a class="el" href="a00017.html#2ccc1fbc024e60b4049c657ce6bd7a35">State</a>, and the actions to be carried out are placed in state functions. Thus, this function calls one of <a class="el" href="a00032.html#a7e99e80bf89549606e6fe10de83fde9" title="This function defines state 0: Default State.">Default_func</a>, <a class="el" href="a00032.html#dbdce8d89d02f7a148d2b166d94eea9d" title="This function defines state 1: Movement Countdown State.">Mov_count_func</a>, <a class="el" href="a00032.html#55bdc319254e6ad2b98b2b988def4718" title="This function defines state 2: Movement Press State.">Mov_press_func</a>, <a class="el" href="a00032.html#e960f26d1f6df6d487075ccb69ca5b49" title="This function defines state 3: Movement Touch State.">Mov_touch_func</a>, <a class="el" href="a00032.html#f38325cb4a238445fadbe32d01dd0d4d" title="This function defines state 4: Button Wait State.">Button_wait_func</a> and <a class="el" href="a00032.html#fdfbcc5955efa378300cbac70a9ce696" title="This function defines state 5: Scroll State.">Scroll_func</a>. For a detailed description of each state, see their state function.<p>
It also calls <a class="el" href="a00032.html#0b07a12ced7bddabebb3979434784dd6" title="This function slows the cursor down if Slow_cursor is TRUE.">Maybe_slow_cursor</a> and <a class="el" href="a00032.html#89860b11fe875495bc114b044067a39d" title="This function holds down the left button if Left_holddown is TRUE.">Maybe_left_holddown</a> to slow down the cursor and/or hold the left mouse button down.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if an event occurs. In this case, the report is filled. <p>
FALSE if no event. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00078">78</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00116.html#l00315">Button_wait_func()</a>, <a class="el" href="a00117.html#l00051">BUTTON_WAIT_STATE</a>, <a class="el" href="a00116.html#l00140">Default_func()</a>, <a class="el" href="a00117.html#l00047">DEFAULT_STATE</a>, <a class="el" href="a00103.html#l00260">FALSE</a>, <a class="el" href="a00117.html#l00032">Hid_mouse_report_reset</a>, <a class="el" href="a00116.html#l00419">Maybe_left_holddown()</a>, <a class="el" href="a00116.html#l00405">Maybe_slow_cursor()</a>, <a class="el" href="a00116.html#l00187">Mov_count_func()</a>, <a class="el" href="a00117.html#l00048">MOV_COUNT_STATE</a>, <a class="el" href="a00116.html#l00215">Mov_press_func()</a>, <a class="el" href="a00117.html#l00049">MOV_PRESS_STATE</a>, <a class="el" href="a00116.html#l00259">Mov_touch_func()</a>, <a class="el" href="a00117.html#l00050">MOV_TOUCH_STATE</a>, <a class="el" href="a00116.html#l00491">Read_sensors()</a>, <a class="el" href="a00116.html#l00031">Report_filled</a>, <a class="el" href="a00116.html#l00363">Scroll_func()</a>, <a class="el" href="a00117.html#l00052">SCROLL_STATE</a>, and <a class="el" href="a00116.html#l00017">State</a>.</p>

<p>Referenced by <a class="el" href="a00109.html#l00113">mouse_task()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00078"></a>00078                          {
<a name="l00079"></a>00079    <span class="comment">// Always reset the HID mouse report. Always.</span>
<a name="l00080"></a>00080    <a class="code" href="a00032.html#f4e0ff6e7ee8f0325d39437c22a19134">Hid_mouse_report_reset</a>();
<a name="l00081"></a>00081 
<a name="l00082"></a>00082    <a class="code" href="a00031.html#8381dd74c2f529168d12a9c266c376f9" title="This function updates Invalue.">Read_sensors</a>();
<a name="l00083"></a>00083 
<a name="l00084"></a>00084    <span class="keywordflow">switch</span>(<a class="code" href="a00031.html#2ccc1fbc024e60b4049c657ce6bd7a35" title="State variable, to memorize across tasks.">State</a>) {
<a name="l00085"></a>00085       <span class="keywordflow">case</span> <a class="code" href="a00032.html#f93d7c80faa6ebd086460cde2d5dd27e">DEFAULT_STATE</a> :
<a name="l00086"></a>00086          <a class="code" href="a00031.html#21281dc357d62eae122bb6d780b25b13" title="If TRUE, there is a mouse event.">Report_filled</a> = <a class="code" href="a00031.html#a7e99e80bf89549606e6fe10de83fde9" title="This function defines state 0: Default State.">Default_func</a>();
<a name="l00087"></a>00087          <span class="keywordflow">break</span>;
<a name="l00088"></a>00088 
<a name="l00089"></a>00089       <span class="keywordflow">case</span> <a class="code" href="a00032.html#d68e8afdf0f54f4928ee5e11692b9664">MOV_COUNT_STATE</a> :
<a name="l00090"></a>00090          <a class="code" href="a00031.html#21281dc357d62eae122bb6d780b25b13" title="If TRUE, there is a mouse event.">Report_filled</a> = <a class="code" href="a00031.html#dbdce8d89d02f7a148d2b166d94eea9d" title="This function defines state 1: Movement Countdown State.">Mov_count_func</a>();
<a name="l00091"></a>00091          <span class="keywordflow">break</span>;
<a name="l00092"></a>00092 
<a name="l00093"></a>00093       <span class="keywordflow">case</span> <a class="code" href="a00032.html#c9dfa06a967280678e0b99fe1d516087">MOV_PRESS_STATE</a> :
<a name="l00094"></a>00094          <a class="code" href="a00031.html#21281dc357d62eae122bb6d780b25b13" title="If TRUE, there is a mouse event.">Report_filled</a> = <a class="code" href="a00031.html#55bdc319254e6ad2b98b2b988def4718" title="This function defines state 2: Movement Press State.">Mov_press_func</a>();
<a name="l00095"></a>00095          <span class="keywordflow">break</span>;
<a name="l00096"></a>00096 
<a name="l00097"></a>00097       <span class="keywordflow">case</span> <a class="code" href="a00032.html#fbc520206b5ab650b17af7ec2fc85528">MOV_TOUCH_STATE</a> :
<a name="l00098"></a>00098          <a class="code" href="a00031.html#21281dc357d62eae122bb6d780b25b13" title="If TRUE, there is a mouse event.">Report_filled</a> = <a class="code" href="a00031.html#e960f26d1f6df6d487075ccb69ca5b49" title="This function defines state 3: Movement Touch State.">Mov_touch_func</a>();
<a name="l00099"></a>00099          <span class="keywordflow">break</span>;
<a name="l00100"></a>00100 
<a name="l00101"></a>00101       <span class="keywordflow">case</span> <a class="code" href="a00032.html#a99a37eb56424da7784084bff3c523e1">BUTTON_WAIT_STATE</a> :
<a name="l00102"></a>00102          <a class="code" href="a00031.html#21281dc357d62eae122bb6d780b25b13" title="If TRUE, there is a mouse event.">Report_filled</a> = <a class="code" href="a00031.html#f38325cb4a238445fadbe32d01dd0d4d" title="This function defines state 4: Button Wait State.">Button_wait_func</a>();
<a name="l00103"></a>00103          <span class="keywordflow">break</span>;
<a name="l00104"></a>00104 
<a name="l00105"></a>00105       <span class="keywordflow">case</span> <a class="code" href="a00032.html#45a5ea2080280529d25b1abcfd0b4e17">SCROLL_STATE</a> :
<a name="l00106"></a>00106          <a class="code" href="a00031.html#21281dc357d62eae122bb6d780b25b13" title="If TRUE, there is a mouse event.">Report_filled</a> = <a class="code" href="a00031.html#fdfbcc5955efa378300cbac70a9ce696" title="This function defines state 5: Scroll State.">Scroll_func</a>();
<a name="l00107"></a>00107          <span class="keywordflow">break</span>;
<a name="l00108"></a>00108 
<a name="l00109"></a>00109       <span class="keywordflow">default</span> :
<a name="l00110"></a>00110          <a class="code" href="a00031.html#2ccc1fbc024e60b4049c657ce6bd7a35" title="State variable, to memorize across tasks.">State</a> = <a class="code" href="a00032.html#f93d7c80faa6ebd086460cde2d5dd27e">DEFAULT_STATE</a>;
<a name="l00111"></a>00111          <a class="code" href="a00031.html#21281dc357d62eae122bb6d780b25b13" title="If TRUE, there is a mouse event.">Report_filled</a> = <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00112"></a>00112          <span class="keywordflow">break</span>;
<a name="l00113"></a>00113    }
<a name="l00114"></a>00114 
<a name="l00115"></a>00115    <a class="code" href="a00031.html#21281dc357d62eae122bb6d780b25b13" title="If TRUE, there is a mouse event.">Report_filled</a> = <a class="code" href="a00031.html#0b07a12ced7bddabebb3979434784dd6" title="This function slows the cursor down if Slow_cursor is TRUE.">Maybe_slow_cursor</a>();
<a name="l00116"></a>00116    <a class="code" href="a00031.html#21281dc357d62eae122bb6d780b25b13" title="If TRUE, there is a mouse event.">Report_filled</a> = <a class="code" href="a00031.html#89860b11fe875495bc114b044067a39d" title="This function holds down the left button if Left_holddown is TRUE.">Maybe_left_holddown</a>();
<a name="l00117"></a>00117 
<a name="l00118"></a>00118    <span class="keywordflow">return</span> <a class="code" href="a00031.html#21281dc357d62eae122bb6d780b25b13" title="If TRUE, there is a mouse event.">Report_filled</a>;
<a name="l00119"></a>00119 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_2f0bcb9627f1e230574ec5e01d14b175_cgraph.png" border="0" usemap="#a00031_2f0bcb9627f1e230574ec5e01d14b175_cgraph_map" alt=""></center>
<map name="a00031_2f0bcb9627f1e230574ec5e01d14b175_cgraph_map">
<area shape="rect" href="a00031.html#f38325cb4a238445fadbe32d01dd0d4d" title="This function defines state 4: Button Wait State." alt="" coords="181,5,301,32"><area shape="rect" href="a00031.html#a7e99e80bf89549606e6fe10de83fde9" title="This function defines state 0: Default State." alt="" coords="196,56,287,83"><area shape="rect" href="a00031.html#89860b11fe875495bc114b044067a39d" title="This function holds down the left button if Left_holddown is TRUE." alt="" coords="169,107,313,133"><area shape="rect" href="a00031.html#0b07a12ced7bddabebb3979434784dd6" title="This function slows the cursor down if Slow_cursor is TRUE." alt="" coords="173,157,309,184"><area shape="rect" href="a00031.html#dbdce8d89d02f7a148d2b166d94eea9d" title="This function defines state 1: Movement Countdown State." alt="" coords="184,208,299,235"><area shape="rect" href="a00031.html#55bdc319254e6ad2b98b2b988def4718" title="This function defines state 2: Movement Press State." alt="" coords="184,259,299,285"><area shape="rect" href="a00031.html#e960f26d1f6df6d487075ccb69ca5b49" title="This function defines state 3: Movement Touch State." alt="" coords="184,309,299,336"><area shape="rect" href="a00031.html#8381dd74c2f529168d12a9c266c376f9" title="This function updates Invalue." alt="" coords="189,360,293,387"><area shape="rect" href="a00031.html#fdfbcc5955efa378300cbac70a9ce696" title="This function defines state 5: Scroll State." alt="" coords="199,411,284,437"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_2f0bcb9627f1e230574ec5e01d14b175_icgraph.png" border="0" usemap="#a00031_2f0bcb9627f1e230574ec5e01d14b175_icgraph_map" alt=""></center>
<map name="a00031_2f0bcb9627f1e230574ec5e01d14b175_icgraph_map">
<area shape="rect" href="a00025.html#3b69114bd2ecd5956cea69196e0ededf" title="Task which links mouse events with the USB HID mouse device." alt="" coords="169,5,260,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="a7e99e80bf89549606e6fe10de83fde9"></a><!-- doxytag: member="sensors.c::Default_func" ref="a7e99e80bf89549606e6fe10de83fde9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit Default_func           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function defines state 0: Default State. 
<p>
Reads sensors and checks for trigger event. If a movement sensor is active, enter Movement Countdown State; if a button sensor is active, enter Button Wait State. The mouse report is filled before entering these states, and the active sensor is stored in <a class="el" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>.<p>
If no sensors are active, re-calibrate now and then.<p>
This function uses <a class="el" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a>.<p>
This function sets <a class="el" href="a00031.html#43240271fe4632556d26ed52f17d8b2c" title="If TRUE, cursor speed may be decreased by skipping tasks.">Slow_cursor</a>.<p>
This function may change <a class="el" href="a00031.html#38eef1a947197d9e2517c1877aca50ca" title="If TRUE, the left mouse button is held down.">Left_holddown</a>.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if a sensor is active and the report is filled. <p>
FALSE otherwise. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00140">140</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00116.html#l00043">Active_sensor</a>, <a class="el" href="a00117.html#l00051">BUTTON_WAIT_STATE</a>, <a class="el" href="a00116.html#l00504">Calibrate()</a>, <a class="el" href="a00103.html#l00260">FALSE</a>, <a class="el" href="a00116.html#l00568">find_active_sensor()</a>, <a class="el" href="a00116.html#l00461">is_button_sensor()</a>, <a class="el" href="a00116.html#l00436">is_movement_sensor()</a>, <a class="el" href="a00116.html#l00027">Left_holddown</a>, <a class="el" href="a00116.html#l00648">Modify_report()</a>, <a class="el" href="a00117.html#l00048">MOV_COUNT_STATE</a>, <a class="el" href="a00116.html#l00046">Neighbor_sensor</a>, <a class="el" href="a00117.html#l00037">NO_SENSOR</a>, <a class="el" href="a00116.html#l00024">Slow_cursor</a>, <a class="el" href="a00116.html#l00017">State</a>, <a class="el" href="a00116.html#l00021">State_counter</a>, and <a class="el" href="a00103.html#l00261">TRUE</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00078">is_mouse_event()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00140"></a>00140                        {
<a name="l00141"></a>00141    <a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> = <a class="code" href="a00032.html#78ced0ef04bf38399a1a312575dc20a5">NO_SENSOR</a>;
<a name="l00142"></a>00142    <a class="code" href="a00031.html#382ed155add7cd1d241a70201202e074" title="Number of active neighbor sensor.">Neighbor_sensor</a> = <a class="code" href="a00032.html#78ced0ef04bf38399a1a312575dc20a5">NO_SENSOR</a>;
<a name="l00143"></a>00143 
<a name="l00144"></a>00144    <span class="comment">// Check for trigger event</span>
<a name="l00145"></a>00145    <a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> = <a class="code" href="a00031.html#caca6743f95a33743918a890a7dcdccd" title="This function runs through the read sensor values and returns the most active sensor...">find_active_sensor</a>();
<a name="l00146"></a>00146 
<a name="l00147"></a>00147    <span class="keywordflow">if</span>(<a class="code" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor.">is_button_sensor</a>(<a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>)) { <span class="comment">// Buttons cheek</span>
<a name="l00148"></a>00148       <span class="keywordflow">if</span>(<a class="code" href="a00031.html#38eef1a947197d9e2517c1877aca50ca" title="If TRUE, the left mouse button is held down.">Left_holddown</a>) {
<a name="l00149"></a>00149          <a class="code" href="a00031.html#38eef1a947197d9e2517c1877aca50ca" title="If TRUE, the left mouse button is held down.">Left_holddown</a> = <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00150"></a>00150          <a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> = <a class="code" href="a00032.html#78ced0ef04bf38399a1a312575dc20a5">NO_SENSOR</a>;
<a name="l00151"></a>00151       }
<a name="l00152"></a>00152       <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> = 0;
<a name="l00153"></a>00153       <a class="code" href="a00031.html#2ccc1fbc024e60b4049c657ce6bd7a35" title="State variable, to memorize across tasks.">State</a> = <a class="code" href="a00032.html#a99a37eb56424da7784084bff3c523e1">BUTTON_WAIT_STATE</a>;
<a name="l00154"></a>00154       <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00155"></a>00155    }
<a name="l00156"></a>00156    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="a00031.html#674791a51be825a2da83277901b855a8" title="This function checks whether a sensor is a movement sensor.">is_movement_sensor</a>(<a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>)) { <span class="comment">// Movements cheek</span>
<a name="l00157"></a>00157       <a class="code" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report.">Modify_report</a>(<a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>);
<a name="l00158"></a>00158       <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> = 0;
<a name="l00159"></a>00159       <a class="code" href="a00031.html#43240271fe4632556d26ed52f17d8b2c" title="If TRUE, cursor speed may be decreased by skipping tasks.">Slow_cursor</a> = <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00160"></a>00160       <a class="code" href="a00031.html#2ccc1fbc024e60b4049c657ce6bd7a35" title="State variable, to memorize across tasks.">State</a> = <a class="code" href="a00032.html#d68e8afdf0f54f4928ee5e11692b9664">MOV_COUNT_STATE</a>;
<a name="l00161"></a>00161       <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00162"></a>00162    }
<a name="l00163"></a>00163 
<a name="l00164"></a>00164    <span class="comment">// No event, re-calibrate every 250 task</span>
<a name="l00165"></a>00165    <span class="keywordflow">if</span>(<a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> &gt; 250) {
<a name="l00166"></a>00166       <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> = 0;
<a name="l00167"></a>00167       <a class="code" href="a00031.html#c8ec403b244267ecd7c29fd6620076e3" title="This function updates Zerovalue by copying Invalue.">Calibrate</a>();
<a name="l00168"></a>00168    }
<a name="l00169"></a>00169    <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a>++;
<a name="l00170"></a>00170 
<a name="l00171"></a>00171    <span class="keywordflow">return</span> <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00172"></a>00172 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_a7e99e80bf89549606e6fe10de83fde9_cgraph.png" border="0" usemap="#a00031_a7e99e80bf89549606e6fe10de83fde9_cgraph_map" alt=""></center>
<map name="a00031_a7e99e80bf89549606e6fe10de83fde9_cgraph_map">
<area shape="rect" href="a00031.html#c8ec403b244267ecd7c29fd6620076e3" title="This function updates Zerovalue by copying Invalue." alt="" coords="183,5,255,32"><area shape="rect" href="a00031.html#caca6743f95a33743918a890a7dcdccd" title="This function runs through the read sensor values and returns the most active sensor..." alt="" coords="155,56,283,83"><area shape="rect" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor." alt="" coords="159,107,279,133"><area shape="rect" href="a00031.html#674791a51be825a2da83277901b855a8" title="This function checks whether a sensor is a movement sensor." alt="" coords="147,157,291,184"><area shape="rect" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report." alt="" coords="169,208,268,235"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_a7e99e80bf89549606e6fe10de83fde9_icgraph.png" border="0" usemap="#a00031_a7e99e80bf89549606e6fe10de83fde9_icgraph_map" alt=""></center>
<map name="a00031_a7e99e80bf89549606e6fe10de83fde9_icgraph_map">
<area shape="rect" href="a00032.html#2f0bcb9627f1e230574ec5e01d14b175" title="This function checks the board interface and fills the HID mouse report." alt="" coords="147,5,261,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="dbdce8d89d02f7a148d2b166d94eea9d"></a><!-- doxytag: member="sensors.c::Mov_count_func" ref="dbdce8d89d02f7a148d2b166d94eea9d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit Mov_count_func           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function defines state 1: Movement Countdown State. 
<p>
Enter Movement Touch State on release or, if the user is still pressing after 250 tasks, Movement Press State. <a class="el" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> holds the sensor to be checked.<p>
This function uses <a class="el" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a>.<p>
This function may change <a class="el" href="a00031.html#43240271fe4632556d26ed52f17d8b2c" title="If TRUE, cursor speed may be decreased by skipping tasks.">Slow_cursor</a>.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE while moving sensor. <p>
FALSE otherwise. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00187">187</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00116.html#l00043">Active_sensor</a>, <a class="el" href="a00103.html#l00260">FALSE</a>, <a class="el" href="a00116.html#l00536">is_sensor_active()</a>, <a class="el" href="a00116.html#l00648">Modify_report()</a>, <a class="el" href="a00117.html#l00049">MOV_PRESS_STATE</a>, <a class="el" href="a00117.html#l00050">MOV_TOUCH_STATE</a>, <a class="el" href="a00116.html#l00024">Slow_cursor</a>, <a class="el" href="a00116.html#l00017">State</a>, <a class="el" href="a00116.html#l00021">State_counter</a>, and <a class="el" href="a00103.html#l00261">TRUE</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00078">is_mouse_event()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00187"></a>00187                          {
<a name="l00188"></a>00188    <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a>++;
<a name="l00189"></a>00189 
<a name="l00190"></a>00190    <span class="keywordflow">if</span>(!<a class="code" href="a00031.html#e647770a880b2f57f210aaeb58b5ccf4" title="This function checks whether a sensor if active.">is_sensor_active</a>(<a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>) &amp;&amp; <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> &gt; 10) {
<a name="l00191"></a>00191       <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> = 0;
<a name="l00192"></a>00192       <a class="code" href="a00031.html#2ccc1fbc024e60b4049c657ce6bd7a35" title="State variable, to memorize across tasks.">State</a> = <a class="code" href="a00032.html#fbc520206b5ab650b17af7ec2fc85528">MOV_TOUCH_STATE</a>;
<a name="l00193"></a>00193       <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00194"></a>00194    }
<a name="l00195"></a>00195    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> &gt; 250) {
<a name="l00196"></a>00196       <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> = 0;
<a name="l00197"></a>00197       <a class="code" href="a00031.html#43240271fe4632556d26ed52f17d8b2c" title="If TRUE, cursor speed may be decreased by skipping tasks.">Slow_cursor</a> = <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00198"></a>00198       <a class="code" href="a00031.html#2ccc1fbc024e60b4049c657ce6bd7a35" title="State variable, to memorize across tasks.">State</a> = <a class="code" href="a00032.html#c9dfa06a967280678e0b99fe1d516087">MOV_PRESS_STATE</a>;
<a name="l00199"></a>00199       <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00200"></a>00200    }
<a name="l00201"></a>00201 
<a name="l00202"></a>00202    <a class="code" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report.">Modify_report</a>(<a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>);
<a name="l00203"></a>00203    <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00204"></a>00204 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_dbdce8d89d02f7a148d2b166d94eea9d_cgraph.png" border="0" usemap="#a00031_dbdce8d89d02f7a148d2b166d94eea9d_cgraph_map" alt=""></center>
<map name="a00031_dbdce8d89d02f7a148d2b166d94eea9d_cgraph_map">
<area shape="rect" href="a00031.html#e647770a880b2f57f210aaeb58b5ccf4" title="This function checks whether a sensor if active." alt="" coords="168,5,285,32"><area shape="rect" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report." alt="" coords="177,56,276,83"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_dbdce8d89d02f7a148d2b166d94eea9d_icgraph.png" border="0" usemap="#a00031_dbdce8d89d02f7a148d2b166d94eea9d_icgraph_map" alt=""></center>
<map name="a00031_dbdce8d89d02f7a148d2b166d94eea9d_icgraph_map">
<area shape="rect" href="a00032.html#2f0bcb9627f1e230574ec5e01d14b175" title="This function checks the board interface and fills the HID mouse report." alt="" coords="168,5,283,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="55bdc319254e6ad2b98b2b988def4718"></a><!-- doxytag: member="sensors.c::Mov_press_func" ref="55bdc319254e6ad2b98b2b988def4718" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit Mov_press_func           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function defines state 2: Movement Press State. 
<p>
Reads active movement sensors, checks for hang, and modifies the mouse report with pressure-dependent speeds. When movement sensors are no longer active, enter Default State.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if a movement sensor is active. <p>
FALSE otherwise. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00215">215</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00116.html#l00043">Active_sensor</a>, <a class="el" href="a00116.html#l00607">Check_hang()</a>, <a class="el" href="a00116.html#l00588">check_nearby_sensor()</a>, <a class="el" href="a00117.html#l00047">DEFAULT_STATE</a>, <a class="el" href="a00103.html#l00260">FALSE</a>, <a class="el" href="a00116.html#l00568">find_active_sensor()</a>, <a class="el" href="a00116.html#l00628">Inc_speed()</a>, <a class="el" href="a00116.html#l00436">is_movement_sensor()</a>, <a class="el" href="a00116.html#l00648">Modify_report()</a>, <a class="el" href="a00116.html#l00046">Neighbor_sensor</a>, <a class="el" href="a00116.html#l00017">State</a>, and <a class="el" href="a00103.html#l00261">TRUE</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00078">is_mouse_event()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00215"></a>00215                          {
<a name="l00216"></a>00216    <a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> = <a class="code" href="a00031.html#caca6743f95a33743918a890a7dcdccd" title="This function runs through the read sensor values and returns the most active sensor...">find_active_sensor</a>();
<a name="l00217"></a>00217 
<a name="l00218"></a>00218    <span class="keywordflow">if</span>(<a class="code" href="a00031.html#674791a51be825a2da83277901b855a8" title="This function checks whether a sensor is a movement sensor.">is_movement_sensor</a>(<a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>)) {
<a name="l00219"></a>00219       <a class="code" href="a00031.html#382ed155add7cd1d241a70201202e074" title="Number of active neighbor sensor.">Neighbor_sensor</a> = <a class="code" href="a00031.html#013506ab65ac6a2b6c4884caf7b409fa" title="This function returns an active nearby sensor, if any.">check_nearby_sensor</a>(<a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>);
<a name="l00220"></a>00220 
<a name="l00221"></a>00221       <a class="code" href="a00031.html#e17490447c5f3a64df8bf1485553dc08" title="This function re-calibrates a hanging sensor by checking opposite cheek.">Check_hang</a>(<a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>);
<a name="l00222"></a>00222 
<a name="l00223"></a>00223       <a class="code" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report.">Modify_report</a>(<a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>);
<a name="l00224"></a>00224       <a class="code" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report.">Modify_report</a>(<a class="code" href="a00031.html#382ed155add7cd1d241a70201202e074" title="Number of active neighbor sensor.">Neighbor_sensor</a>);
<a name="l00225"></a>00225 
<a name="l00226"></a>00226       <a class="code" href="a00031.html#3f0f020fe6f952f09853eae164d82745" title="This function checks sensor pressure for speed increase.">Inc_speed</a>(<a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>);
<a name="l00227"></a>00227       <a class="code" href="a00031.html#3f0f020fe6f952f09853eae164d82745" title="This function checks sensor pressure for speed increase.">Inc_speed</a>(<a class="code" href="a00031.html#382ed155add7cd1d241a70201202e074" title="Number of active neighbor sensor.">Neighbor_sensor</a>);
<a name="l00228"></a>00228 
<a name="l00229"></a>00229       <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00230"></a>00230    }
<a name="l00231"></a>00231 
<a name="l00232"></a>00232    <a class="code" href="a00031.html#2ccc1fbc024e60b4049c657ce6bd7a35" title="State variable, to memorize across tasks.">State</a> = <a class="code" href="a00032.html#f93d7c80faa6ebd086460cde2d5dd27e">DEFAULT_STATE</a>;
<a name="l00233"></a>00233    <span class="keywordflow">return</span> <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00234"></a>00234 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_55bdc319254e6ad2b98b2b988def4718_cgraph.png" border="0" usemap="#a00031_55bdc319254e6ad2b98b2b988def4718_cgraph_map" alt=""></center>
<map name="a00031_55bdc319254e6ad2b98b2b988def4718_cgraph_map">
<area shape="rect" href="a00031.html#e17490447c5f3a64df8bf1485553dc08" title="This function re&#45;calibrates a hanging sensor by checking opposite cheek." alt="" coords="196,5,289,32"><area shape="rect" href="a00031.html#674791a51be825a2da83277901b855a8" title="This function checks whether a sensor is a movement sensor." alt="" coords="365,31,509,57"><area shape="rect" href="a00031.html#013506ab65ac6a2b6c4884caf7b409fa" title="This function returns an active nearby sensor, if any." alt="" coords="169,107,316,133"><area shape="rect" href="a00031.html#caca6743f95a33743918a890a7dcdccd" title="This function runs through the read sensor values and returns the most active sensor..." alt="" coords="179,157,307,184"><area shape="rect" href="a00031.html#3f0f020fe6f952f09853eae164d82745" title="This function checks sensor pressure for speed increase." alt="" coords="203,208,283,235"><area shape="rect" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report." alt="" coords="388,233,487,260"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_55bdc319254e6ad2b98b2b988def4718_icgraph.png" border="0" usemap="#a00031_55bdc319254e6ad2b98b2b988def4718_icgraph_map" alt=""></center>
<map name="a00031_55bdc319254e6ad2b98b2b988def4718_icgraph_map">
<area shape="rect" href="a00032.html#2f0bcb9627f1e230574ec5e01d14b175" title="This function checks the board interface and fills the HID mouse report." alt="" coords="168,5,283,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="e960f26d1f6df6d487075ccb69ca5b49"></a><!-- doxytag: member="sensors.c::Mov_touch_func" ref="e960f26d1f6df6d487075ccb69ca5b49" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit Mov_touch_func           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function defines state 3: Movement Touch State. 
<p>
Like Movement Countdown State, move slowly in the direction of <a class="el" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>. After 1000 tasks, move faster.<p>
Exiting the state happens in three ways:<p>
If the current sensor is touched again, stop the movement and enter Button Wait State. If a button sensor is touched, do the same.<p>
If another movement sensor is touched, enter Movement Countdown State.<p>
This function uses <a class="el" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a>.<p>
This function may change <a class="el" href="a00031.html#43240271fe4632556d26ed52f17d8b2c" title="If TRUE, cursor speed may be decreased by skipping tasks.">Slow_cursor</a>.<p>
This function may change <a class="el" href="a00031.html#38eef1a947197d9e2517c1877aca50ca" title="If TRUE, the left mouse button is held down.">Left_holddown</a>.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE while in this state. <p>
FALSE when a button sensor is touched. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00259">259</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00116.html#l00043">Active_sensor</a>, <a class="el" href="a00117.html#l00051">BUTTON_WAIT_STATE</a>, <a class="el" href="a00103.html#l00260">FALSE</a>, <a class="el" href="a00116.html#l00568">find_active_sensor()</a>, <a class="el" href="a00116.html#l00461">is_button_sensor()</a>, <a class="el" href="a00116.html#l00436">is_movement_sensor()</a>, <a class="el" href="a00116.html#l00027">Left_holddown</a>, <a class="el" href="a00116.html#l00648">Modify_report()</a>, <a class="el" href="a00117.html#l00048">MOV_COUNT_STATE</a>, <a class="el" href="a00117.html#l00037">NO_SENSOR</a>, <a class="el" href="a00116.html#l00024">Slow_cursor</a>, <a class="el" href="a00116.html#l00017">State</a>, <a class="el" href="a00116.html#l00021">State_counter</a>, and <a class="el" href="a00103.html#l00261">TRUE</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00078">is_mouse_event()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00259"></a>00259                          {
<a name="l00260"></a>00260    <span class="keywordflow">if</span>(<a class="code" href="a00031.html#38eef1a947197d9e2517c1877aca50ca" title="If TRUE, the left mouse button is held down.">Left_holddown</a>) {
<a name="l00261"></a>00261       <a class="code" href="a00031.html#38eef1a947197d9e2517c1877aca50ca" title="If TRUE, the left mouse button is held down.">Left_holddown</a> = !<a class="code" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor.">is_button_sensor</a>(<a class="code" href="a00031.html#caca6743f95a33743918a890a7dcdccd" title="This function runs through the read sensor values and returns the most active sensor...">find_active_sensor</a>());
<a name="l00262"></a>00262    }
<a name="l00263"></a>00263 
<a name="l00264"></a>00264    <span class="keywordflow">if</span>(<a class="code" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor.">is_button_sensor</a>(<a class="code" href="a00031.html#caca6743f95a33743918a890a7dcdccd" title="This function runs through the read sensor values and returns the most active sensor...">find_active_sensor</a>()) ||
<a name="l00265"></a>00265       <a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> == <a class="code" href="a00031.html#caca6743f95a33743918a890a7dcdccd" title="This function runs through the read sensor values and returns the most active sensor...">find_active_sensor</a>()) {
<a name="l00266"></a>00266 
<a name="l00267"></a>00267       <a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> = <a class="code" href="a00032.html#78ced0ef04bf38399a1a312575dc20a5">NO_SENSOR</a>;
<a name="l00268"></a>00268       <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> = 0;
<a name="l00269"></a>00269       <a class="code" href="a00031.html#2ccc1fbc024e60b4049c657ce6bd7a35" title="State variable, to memorize across tasks.">State</a> = <a class="code" href="a00032.html#a99a37eb56424da7784084bff3c523e1">BUTTON_WAIT_STATE</a>;
<a name="l00270"></a>00270       <span class="keywordflow">return</span> <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00271"></a>00271    }
<a name="l00272"></a>00272    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="a00031.html#674791a51be825a2da83277901b855a8" title="This function checks whether a sensor is a movement sensor.">is_movement_sensor</a>(<a class="code" href="a00031.html#caca6743f95a33743918a890a7dcdccd" title="This function runs through the read sensor values and returns the most active sensor...">find_active_sensor</a>())) {
<a name="l00273"></a>00273       <a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> = <a class="code" href="a00031.html#caca6743f95a33743918a890a7dcdccd" title="This function runs through the read sensor values and returns the most active sensor...">find_active_sensor</a>();
<a name="l00274"></a>00274       <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> = 0;
<a name="l00275"></a>00275       <a class="code" href="a00031.html#2ccc1fbc024e60b4049c657ce6bd7a35" title="State variable, to memorize across tasks.">State</a> = <a class="code" href="a00032.html#d68e8afdf0f54f4928ee5e11692b9664">MOV_COUNT_STATE</a>;
<a name="l00276"></a>00276       <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00277"></a>00277    }
<a name="l00278"></a>00278 
<a name="l00279"></a>00279    <span class="keywordflow">if</span>(<a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> &lt;= 1000) {
<a name="l00280"></a>00280       <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a>++;
<a name="l00281"></a>00281    }
<a name="l00282"></a>00282    <span class="keywordflow">else</span> { <span class="comment">// Past first 1000 tasks, move faster</span>
<a name="l00283"></a>00283       <a class="code" href="a00031.html#43240271fe4632556d26ed52f17d8b2c" title="If TRUE, cursor speed may be decreased by skipping tasks.">Slow_cursor</a> = <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00284"></a>00284    }
<a name="l00285"></a>00285 
<a name="l00286"></a>00286    <a class="code" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report.">Modify_report</a>(<a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>);
<a name="l00287"></a>00287    <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00288"></a>00288 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_e960f26d1f6df6d487075ccb69ca5b49_cgraph.png" border="0" usemap="#a00031_e960f26d1f6df6d487075ccb69ca5b49_cgraph_map" alt=""></center>
<map name="a00031_e960f26d1f6df6d487075ccb69ca5b49_cgraph_map">
<area shape="rect" href="a00031.html#caca6743f95a33743918a890a7dcdccd" title="This function runs through the read sensor values and returns the most active sensor..." alt="" coords="176,5,304,32"><area shape="rect" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor." alt="" coords="180,56,300,83"><area shape="rect" href="a00031.html#674791a51be825a2da83277901b855a8" title="This function checks whether a sensor is a movement sensor." alt="" coords="168,107,312,133"><area shape="rect" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report." alt="" coords="191,157,289,184"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_e960f26d1f6df6d487075ccb69ca5b49_icgraph.png" border="0" usemap="#a00031_e960f26d1f6df6d487075ccb69ca5b49_icgraph_map" alt=""></center>
<map name="a00031_e960f26d1f6df6d487075ccb69ca5b49_icgraph_map">
<area shape="rect" href="a00032.html#2f0bcb9627f1e230574ec5e01d14b175" title="This function checks the board interface and fills the HID mouse report." alt="" coords="168,5,283,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="f38325cb4a238445fadbe32d01dd0d4d"></a><!-- doxytag: member="sensors.c::Button_wait_func" ref="f38325cb4a238445fadbe32d01dd0d4d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit Button_wait_func           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function defines state 4: Button Wait State. 
<p>
Produce one click and wait. The precise behavior depends on the value the previous task has set <a class="el" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> to:<p>
If <a class="el" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> is <a class="el" href="a00032.html#78ced0ef04bf38399a1a312575dc20a5">NO_SENSOR</a>, don't produce a click; just enter Default State on release (but no earlier than 100 tasks).<p>
If <a class="el" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> is a button, produce a click on quick release and enter Default State. However, if the button is held for more than 100 tasks, enter a different state:<p>
If <a class="el" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> is <a class="el" href="a00032.html#e13a1cb039cbdec7ecc6c233ef3865a0">LCLICK_SENSOR</a>, activate holddown of the left mouse button and enter Default State.<p>
If <a class="el" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> is <a class="el" href="a00032.html#562cb1ec1ebc082a83b31baf6ec92d2e">RCLICK_SENSOR</a>, enter Scroll State.<p>
This function uses <a class="el" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a>.<p>
This function may change <a class="el" href="a00031.html#38eef1a947197d9e2517c1877aca50ca" title="If TRUE, the left mouse button is held down.">Left_holddown</a>.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE when producing a click. <p>
FALSE while waiting. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00315">315</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00116.html#l00043">Active_sensor</a>, <a class="el" href="a00117.html#l00047">DEFAULT_STATE</a>, <a class="el" href="a00103.html#l00260">FALSE</a>, <a class="el" href="a00116.html#l00568">find_active_sensor()</a>, <a class="el" href="a00116.html#l00461">is_button_sensor()</a>, <a class="el" href="a00117.html#l00044">LCLICK_SENSOR</a>, <a class="el" href="a00116.html#l00027">Left_holddown</a>, <a class="el" href="a00116.html#l00648">Modify_report()</a>, <a class="el" href="a00117.html#l00037">NO_SENSOR</a>, <a class="el" href="a00117.html#l00052">SCROLL_STATE</a>, <a class="el" href="a00116.html#l00017">State</a>, <a class="el" href="a00116.html#l00021">State_counter</a>, and <a class="el" href="a00103.html#l00261">TRUE</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00078">is_mouse_event()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00315"></a>00315                            {
<a name="l00316"></a>00316    <span class="keywordflow">switch</span>(<a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>) {
<a name="l00317"></a>00317       <span class="keywordflow">case</span> <a class="code" href="a00032.html#78ced0ef04bf38399a1a312575dc20a5">NO_SENSOR</a> :
<a name="l00318"></a>00318          <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a>++;
<a name="l00319"></a>00319 
<a name="l00320"></a>00320          <span class="keywordflow">if</span>(<a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> &gt; 100 &amp;&amp;
<a name="l00321"></a>00321             !<a class="code" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor.">is_button_sensor</a>(<a class="code" href="a00031.html#caca6743f95a33743918a890a7dcdccd" title="This function runs through the read sensor values and returns the most active sensor...">find_active_sensor</a>())) {
<a name="l00322"></a>00322 
<a name="l00323"></a>00323             <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> = 0;
<a name="l00324"></a>00324             <a class="code" href="a00031.html#2ccc1fbc024e60b4049c657ce6bd7a35" title="State variable, to memorize across tasks.">State</a> = <a class="code" href="a00032.html#f93d7c80faa6ebd086460cde2d5dd27e">DEFAULT_STATE</a>;
<a name="l00325"></a>00325          }
<a name="l00326"></a>00326          <span class="keywordflow">return</span> <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00327"></a>00327 
<a name="l00328"></a>00328       <span class="keywordflow">default</span> : <span class="comment">// Button</span>
<a name="l00329"></a>00329          <span class="keywordflow">if</span>(!<a class="code" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor.">is_button_sensor</a>(<a class="code" href="a00031.html#caca6743f95a33743918a890a7dcdccd" title="This function runs through the read sensor values and returns the most active sensor...">find_active_sensor</a>())) {
<a name="l00330"></a>00330             <span class="keywordflow">if</span>(<a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> &gt; 100) {
<a name="l00331"></a>00331                <a class="code" href="a00031.html#38eef1a947197d9e2517c1877aca50ca" title="If TRUE, the left mouse button is held down.">Left_holddown</a> = <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00332"></a>00332 
<a name="l00333"></a>00333                <span class="keywordflow">if</span>(<a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> == <a class="code" href="a00032.html#e13a1cb039cbdec7ecc6c233ef3865a0">LCLICK_SENSOR</a>) {
<a name="l00334"></a>00334                   <a class="code" href="a00031.html#38eef1a947197d9e2517c1877aca50ca" title="If TRUE, the left mouse button is held down.">Left_holddown</a> = <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00335"></a>00335                }
<a name="l00336"></a>00336                <span class="keywordflow">else</span> {
<a name="l00337"></a>00337                   <a class="code" href="a00031.html#2ccc1fbc024e60b4049c657ce6bd7a35" title="State variable, to memorize across tasks.">State</a> = <a class="code" href="a00032.html#45a5ea2080280529d25b1abcfd0b4e17">SCROLL_STATE</a>;
<a name="l00338"></a>00338                   <span class="keywordflow">return</span> <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00339"></a>00339                }
<a name="l00340"></a>00340             }
<a name="l00341"></a>00341             <a class="code" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report.">Modify_report</a>(<a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>);
<a name="l00342"></a>00342             <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> = 0;
<a name="l00343"></a>00343             <a class="code" href="a00031.html#2ccc1fbc024e60b4049c657ce6bd7a35" title="State variable, to memorize across tasks.">State</a> = <a class="code" href="a00032.html#f93d7c80faa6ebd086460cde2d5dd27e">DEFAULT_STATE</a>;
<a name="l00344"></a>00344             <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00345"></a>00345          }
<a name="l00346"></a>00346          <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a>++;
<a name="l00347"></a>00347          <span class="keywordflow">return</span> <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00348"></a>00348    }
<a name="l00349"></a>00349 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_f38325cb4a238445fadbe32d01dd0d4d_cgraph.png" border="0" usemap="#a00031_f38325cb4a238445fadbe32d01dd0d4d_cgraph_map" alt=""></center>
<map name="a00031_f38325cb4a238445fadbe32d01dd0d4d_cgraph_map">
<area shape="rect" href="a00031.html#caca6743f95a33743918a890a7dcdccd" title="This function runs through the read sensor values and returns the most active sensor..." alt="" coords="173,5,301,32"><area shape="rect" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor." alt="" coords="177,56,297,83"><area shape="rect" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report." alt="" coords="188,107,287,133"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_f38325cb4a238445fadbe32d01dd0d4d_icgraph.png" border="0" usemap="#a00031_f38325cb4a238445fadbe32d01dd0d4d_icgraph_map" alt=""></center>
<map name="a00031_f38325cb4a238445fadbe32d01dd0d4d_icgraph_map">
<area shape="rect" href="a00032.html#2f0bcb9627f1e230574ec5e01d14b175" title="This function checks the board interface and fills the HID mouse report." alt="" coords="173,5,288,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="fdfbcc5955efa378300cbac70a9ce696"></a><!-- doxytag: member="sensors.c::Scroll_func" ref="fdfbcc5955efa378300cbac70a9ce696" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit Scroll_func           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function defines state 5: Scroll State. 
<p>
<a class="el" href="a00032.html#64dba89518948116df90bc847597a8aa">UP_SENSOR</a> scrolls up and <a class="el" href="a00032.html#332db1b59b10467f031e40272990e35e">DOWN_SENSOR</a> scrolls down. Scroll signals are sent only every 50 task to limit speed.<p>
Exits to Button Wait State when a button is pressed.<p>
This function uses <a class="el" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a>.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE while scrolling. <p>
FALSE otherwise. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00363">363</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00116.html#l00043">Active_sensor</a>, <a class="el" href="a00117.html#l00051">BUTTON_WAIT_STATE</a>, <a class="el" href="a00117.html#l00042">DOWN_SENSOR</a>, <a class="el" href="a00103.html#l00260">FALSE</a>, <a class="el" href="a00116.html#l00568">find_active_sensor()</a>, <a class="el" href="a00117.html#l00026">Hid_mouse_report_scroll_down</a>, <a class="el" href="a00117.html#l00025">Hid_mouse_report_scroll_up</a>, <a class="el" href="a00116.html#l00461">is_button_sensor()</a>, <a class="el" href="a00117.html#l00044">LCLICK_SENSOR</a>, <a class="el" href="a00117.html#l00037">NO_SENSOR</a>, <a class="el" href="a00117.html#l00043">RCLICK_SENSOR</a>, <a class="el" href="a00116.html#l00017">State</a>, <a class="el" href="a00116.html#l00021">State_counter</a>, <a class="el" href="a00103.html#l00261">TRUE</a>, and <a class="el" href="a00117.html#l00038">UP_SENSOR</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00078">is_mouse_event()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00363"></a>00363                       {
<a name="l00364"></a>00364    <a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> = <a class="code" href="a00031.html#caca6743f95a33743918a890a7dcdccd" title="This function runs through the read sensor values and returns the most active sensor...">find_active_sensor</a>();
<a name="l00365"></a>00365    <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a>++;
<a name="l00366"></a>00366 
<a name="l00367"></a>00367    <span class="keywordflow">if</span>(<a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> &gt; 50 || <a class="code" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor.">is_button_sensor</a>(<a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>)) {
<a name="l00368"></a>00368       <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> = 0;
<a name="l00369"></a>00369 
<a name="l00370"></a>00370       <span class="keywordflow">switch</span>(<a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a>) {
<a name="l00371"></a>00371          <span class="keywordflow">case</span> <a class="code" href="a00032.html#64dba89518948116df90bc847597a8aa">UP_SENSOR</a> : <span class="comment">// PF1</span>
<a name="l00372"></a>00372             <a class="code" href="a00032.html#c35d2840ae039a21de5c0c7528ab593e">Hid_mouse_report_scroll_up</a>();
<a name="l00373"></a>00373             <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00374"></a>00374 
<a name="l00375"></a>00375          <span class="keywordflow">case</span> <a class="code" href="a00032.html#332db1b59b10467f031e40272990e35e">DOWN_SENSOR</a> : <span class="comment">// PF5</span>
<a name="l00376"></a>00376             <a class="code" href="a00032.html#a193119d93b0cfe4bd58d874d885019f">Hid_mouse_report_scroll_down</a>();
<a name="l00377"></a>00377             <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00378"></a>00378 
<a name="l00379"></a>00379          <span class="keywordflow">case</span> <a class="code" href="a00032.html#562cb1ec1ebc082a83b31baf6ec92d2e">RCLICK_SENSOR</a> : <span class="comment">// PF6</span>
<a name="l00380"></a>00380             <a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> = <a class="code" href="a00032.html#78ced0ef04bf38399a1a312575dc20a5">NO_SENSOR</a>;
<a name="l00381"></a>00381             <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> = 0;
<a name="l00382"></a>00382             <a class="code" href="a00031.html#2ccc1fbc024e60b4049c657ce6bd7a35" title="State variable, to memorize across tasks.">State</a> = <a class="code" href="a00032.html#a99a37eb56424da7784084bff3c523e1">BUTTON_WAIT_STATE</a>;
<a name="l00383"></a>00383             <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00384"></a>00384 
<a name="l00385"></a>00385          <span class="keywordflow">case</span> <a class="code" href="a00032.html#e13a1cb039cbdec7ecc6c233ef3865a0">LCLICK_SENSOR</a> : <span class="comment">// PF7</span>
<a name="l00386"></a>00386             <a class="code" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195" title="Number of currently active sensor.">Active_sensor</a> = <a class="code" href="a00032.html#78ced0ef04bf38399a1a312575dc20a5">NO_SENSOR</a>;
<a name="l00387"></a>00387             <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> = 0;
<a name="l00388"></a>00388             <a class="code" href="a00031.html#2ccc1fbc024e60b4049c657ce6bd7a35" title="State variable, to memorize across tasks.">State</a> = <a class="code" href="a00032.html#a99a37eb56424da7784084bff3c523e1">BUTTON_WAIT_STATE</a>;
<a name="l00389"></a>00389             <span class="keywordflow">return</span> <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00390"></a>00390       }
<a name="l00391"></a>00391    }
<a name="l00392"></a>00392    <span class="keywordflow">return</span> <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00393"></a>00393 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_fdfbcc5955efa378300cbac70a9ce696_cgraph.png" border="0" usemap="#a00031_fdfbcc5955efa378300cbac70a9ce696_cgraph_map" alt=""></center>
<map name="a00031_fdfbcc5955efa378300cbac70a9ce696_cgraph_map">
<area shape="rect" href="a00031.html#caca6743f95a33743918a890a7dcdccd" title="This function runs through the read sensor values and returns the most active sensor..." alt="" coords="139,5,267,32"><area shape="rect" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor." alt="" coords="143,56,263,83"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_fdfbcc5955efa378300cbac70a9ce696_icgraph.png" border="0" usemap="#a00031_fdfbcc5955efa378300cbac70a9ce696_icgraph_map" alt=""></center>
<map name="a00031_fdfbcc5955efa378300cbac70a9ce696_icgraph_map">
<area shape="rect" href="a00032.html#2f0bcb9627f1e230574ec5e01d14b175" title="This function checks the board interface and fills the HID mouse report." alt="" coords="139,5,253,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="0b07a12ced7bddabebb3979434784dd6"></a><!-- doxytag: member="sensors.c::Maybe_slow_cursor" ref="0b07a12ced7bddabebb3979434784dd6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit Maybe_slow_cursor           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function slows the cursor down if <a class="el" href="a00031.html#43240271fe4632556d26ed52f17d8b2c" title="If TRUE, cursor speed may be decreased by skipping tasks.">Slow_cursor</a> is <a class="el" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>. 
<p>
If so, and if <a class="el" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> is not a multiple of 5, reset byte 1 and 2 in <a class="el" href="a00031.html#90be438f7330dcc64cb9b12824967282" title="Mouse report, defined in mouse_task.c.">g_hid_mouse_report</a>.<p>
This function uses <a class="el" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a>.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE if movement has been decimated. <p>
TRUE otherwise. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00405">405</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00103.html#l00260">FALSE</a>, <a class="el" href="a00109.html#l00065">g_hid_mouse_report</a>, <a class="el" href="a00116.html#l00024">Slow_cursor</a>, <a class="el" href="a00116.html#l00021">State_counter</a>, and <a class="el" href="a00103.html#l00261">TRUE</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00078">is_mouse_event()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00405"></a>00405                             {
<a name="l00406"></a>00406    <span class="keywordflow">if</span>(<a class="code" href="a00031.html#43240271fe4632556d26ed52f17d8b2c" title="If TRUE, cursor speed may be decreased by skipping tasks.">Slow_cursor</a> &amp;&amp; <a class="code" href="a00031.html#e3ca45f5ff481979b317a3b40983733b" title="Generic global counter to stay in a state a number of tasks.">State_counter</a> % 5 != 0) {
<a name="l00407"></a>00407       <a class="code" href="a00024.html#90be438f7330dcc64cb9b12824967282" title="Used to store the HID mouse report.">g_hid_mouse_report</a>[1] = 0;
<a name="l00408"></a>00408       <a class="code" href="a00024.html#90be438f7330dcc64cb9b12824967282" title="Used to store the HID mouse report.">g_hid_mouse_report</a>[2] = 0;
<a name="l00409"></a>00409       <span class="keywordflow">return</span> <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00410"></a>00410    }
<a name="l00411"></a>00411    <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00412"></a>00412 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_0b07a12ced7bddabebb3979434784dd6_icgraph.png" border="0" usemap="#a00031_0b07a12ced7bddabebb3979434784dd6_icgraph_map" alt=""></center>
<map name="a00031_0b07a12ced7bddabebb3979434784dd6_icgraph_map">
<area shape="rect" href="a00032.html#2f0bcb9627f1e230574ec5e01d14b175" title="This function checks the board interface and fills the HID mouse report." alt="" coords="189,5,304,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="89860b11fe875495bc114b044067a39d"></a><!-- doxytag: member="sensors.c::Maybe_left_holddown" ref="89860b11fe875495bc114b044067a39d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit Maybe_left_holddown           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function holds down the left button if <a class="el" href="a00031.html#38eef1a947197d9e2517c1877aca50ca" title="If TRUE, the left mouse button is held down.">Left_holddown</a> is <a class="el" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if the button is held down. <p>
<a class="el" href="a00031.html#21281dc357d62eae122bb6d780b25b13" title="If TRUE, there is a mouse event.">Report_filled</a> otherwise. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00419">419</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00117.html#l00044">LCLICK_SENSOR</a>, <a class="el" href="a00116.html#l00027">Left_holddown</a>, <a class="el" href="a00116.html#l00648">Modify_report()</a>, and <a class="el" href="a00116.html#l00031">Report_filled</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00078">is_mouse_event()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00419"></a>00419                               {
<a name="l00420"></a>00420    <span class="keywordflow">if</span>(<a class="code" href="a00031.html#38eef1a947197d9e2517c1877aca50ca" title="If TRUE, the left mouse button is held down.">Left_holddown</a>) {
<a name="l00421"></a>00421       <a class="code" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report.">Modify_report</a>(<a class="code" href="a00032.html#e13a1cb039cbdec7ecc6c233ef3865a0">LCLICK_SENSOR</a>);
<a name="l00422"></a>00422    }
<a name="l00423"></a>00423    <span class="keywordflow">return</span> (<a class="code" href="a00031.html#21281dc357d62eae122bb6d780b25b13" title="If TRUE, there is a mouse event.">Report_filled</a> || <a class="code" href="a00031.html#38eef1a947197d9e2517c1877aca50ca" title="If TRUE, the left mouse button is held down.">Left_holddown</a>);
<a name="l00424"></a>00424 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_89860b11fe875495bc114b044067a39d_cgraph.png" border="0" usemap="#a00031_89860b11fe875495bc114b044067a39d_cgraph_map" alt=""></center>
<map name="a00031_89860b11fe875495bc114b044067a39d_cgraph_map">
<area shape="rect" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report." alt="" coords="201,5,300,32"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_89860b11fe875495bc114b044067a39d_icgraph.png" border="0" usemap="#a00031_89860b11fe875495bc114b044067a39d_icgraph_map" alt=""></center>
<map name="a00031_89860b11fe875495bc114b044067a39d_icgraph_map">
<area shape="rect" href="a00032.html#2f0bcb9627f1e230574ec5e01d14b175" title="This function checks the board interface and fills the HID mouse report." alt="" coords="200,5,315,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="674791a51be825a2da83277901b855a8"></a><!-- doxytag: member="sensors.c::is_movement_sensor" ref="674791a51be825a2da83277901b855a8" args="(U8 sensor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit is_movement_sensor           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>sensor</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function checks whether a sensor is a movement sensor. 
<p>
That is, if it is one of <a class="el" href="a00032.html#332db1b59b10467f031e40272990e35e">DOWN_SENSOR</a>, <a class="el" href="a00032.html#a953bc212d4fe4274d23c0e9c2f5459f">LEFT_SENSOR</a>, <a class="el" href="a00032.html#bbe9f6a700620d390c0c7706e1240d48">RIGHT_SENSOR</a> or <a class="el" href="a00032.html#64dba89518948116df90bc847597a8aa">UP_SENSOR</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sensor</em>&nbsp;</td><td>The sensor to be checked.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if a movement sensor. <p>
FALSE otherwise. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00436">436</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00117.html#l00042">DOWN_SENSOR</a>, <a class="el" href="a00103.html#l00260">FALSE</a>, <a class="el" href="a00117.html#l00039">LEFT_SENSOR</a>, <a class="el" href="a00117.html#l00041">RIGHT_SENSOR</a>, <a class="el" href="a00103.html#l00261">TRUE</a>, and <a class="el" href="a00117.html#l00038">UP_SENSOR</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00607">Check_hang()</a>, <a class="el" href="a00116.html#l00140">Default_func()</a>, <a class="el" href="a00116.html#l00536">is_sensor_active()</a>, <a class="el" href="a00116.html#l00215">Mov_press_func()</a>, <a class="el" href="a00116.html#l00259">Mov_touch_func()</a>, and <a class="el" href="a00116.html#l00491">Read_sensors()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00436"></a>00436                                   {
<a name="l00437"></a>00437    <span class="keywordflow">if</span>(sensor == <a class="code" href="a00032.html#332db1b59b10467f031e40272990e35e">DOWN_SENSOR</a>) {
<a name="l00438"></a>00438       <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00439"></a>00439    }
<a name="l00440"></a>00440    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(sensor == <a class="code" href="a00032.html#a953bc212d4fe4274d23c0e9c2f5459f">LEFT_SENSOR</a>) {
<a name="l00441"></a>00441       <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00442"></a>00442    }
<a name="l00443"></a>00443    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(sensor == <a class="code" href="a00032.html#bbe9f6a700620d390c0c7706e1240d48">RIGHT_SENSOR</a>) {
<a name="l00444"></a>00444       <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00445"></a>00445    }
<a name="l00446"></a>00446    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(sensor == <a class="code" href="a00032.html#64dba89518948116df90bc847597a8aa">UP_SENSOR</a>) {
<a name="l00447"></a>00447       <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00448"></a>00448    }
<a name="l00449"></a>00449    <span class="keywordflow">return</span> <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00450"></a>00450 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_674791a51be825a2da83277901b855a8_icgraph.png" border="0" usemap="#a00031_674791a51be825a2da83277901b855a8_icgraph_map" alt=""></center>
<map name="a00031_674791a51be825a2da83277901b855a8_icgraph_map">
<area shape="rect" href="a00032.html#e17490447c5f3a64df8bf1485553dc08" title="This function re&#45;calibrates a hanging sensor by checking opposite cheek." alt="" coords="363,31,456,57"><area shape="rect" href="a00032.html#55bdc319254e6ad2b98b2b988def4718" title="This function defines state 2: Movement Press State." alt="" coords="504,5,619,32"><area shape="rect" href="a00032.html#a7e99e80bf89549606e6fe10de83fde9" title="This function defines state 0: Default State." alt="" coords="211,81,301,108"><area shape="rect" href="a00032.html#e647770a880b2f57f210aaeb58b5ccf4" title="This function checks whether a sensor if active." alt="" coords="197,132,315,159"><area shape="rect" href="a00032.html#e960f26d1f6df6d487075ccb69ca5b49" title="This function defines state 3: Movement Touch State." alt="" coords="199,183,313,209"><area shape="rect" href="a00032.html#8381dd74c2f529168d12a9c266c376f9" title="This function updates Invalue." alt="" coords="204,233,308,260"></map>
</div>

</div>
</div><p>
<a class="anchor" name="f69836438397c47cde6e849fc2a158a6"></a><!-- doxytag: member="sensors.c::is_button_sensor" ref="f69836438397c47cde6e849fc2a158a6" args="(U8 sensor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit is_button_sensor           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>sensor</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function checks whether a sensor is a button sensor. 
<p>
That is, if it is one of <a class="el" href="a00032.html#e13a1cb039cbdec7ecc6c233ef3865a0">LCLICK_SENSOR</a> or <a class="el" href="a00032.html#562cb1ec1ebc082a83b31baf6ec92d2e">RCLICK_SENSOR</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sensor</em>&nbsp;</td><td>The sensor to be checked.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if a button sensor. <p>
FALSE otherwise. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00461">461</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00103.html#l00260">FALSE</a>, <a class="el" href="a00117.html#l00044">LCLICK_SENSOR</a>, <a class="el" href="a00117.html#l00043">RCLICK_SENSOR</a>, and <a class="el" href="a00103.html#l00261">TRUE</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00315">Button_wait_func()</a>, <a class="el" href="a00116.html#l00607">Check_hang()</a>, <a class="el" href="a00116.html#l00140">Default_func()</a>, <a class="el" href="a00116.html#l00536">is_sensor_active()</a>, <a class="el" href="a00116.html#l00259">Mov_touch_func()</a>, <a class="el" href="a00116.html#l00491">Read_sensors()</a>, and <a class="el" href="a00116.html#l00363">Scroll_func()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00461"></a>00461                                 {
<a name="l00462"></a>00462    <span class="keywordflow">if</span>(sensor == <a class="code" href="a00032.html#e13a1cb039cbdec7ecc6c233ef3865a0">LCLICK_SENSOR</a>) {
<a name="l00463"></a>00463       <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00464"></a>00464    }
<a name="l00465"></a>00465    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(sensor == <a class="code" href="a00032.html#562cb1ec1ebc082a83b31baf6ec92d2e">RCLICK_SENSOR</a>) {
<a name="l00466"></a>00466       <span class="keywordflow">return</span> <a class="code" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l00467"></a>00467    }
<a name="l00468"></a>00468    <span class="keywordflow">return</span> <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00469"></a>00469 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_f69836438397c47cde6e849fc2a158a6_icgraph.png" border="0" usemap="#a00031_f69836438397c47cde6e849fc2a158a6_icgraph_map" alt=""></center>
<map name="a00031_f69836438397c47cde6e849fc2a158a6_icgraph_map">
<area shape="rect" href="a00032.html#f38325cb4a238445fadbe32d01dd0d4d" title="This function defines state 4: Button Wait State." alt="" coords="173,5,293,32"><area shape="rect" href="a00032.html#e17490447c5f3a64df8bf1485553dc08" title="This function re&#45;calibrates a hanging sensor by checking opposite cheek." alt="" coords="341,107,435,133"><area shape="rect" href="a00032.html#a7e99e80bf89549606e6fe10de83fde9" title="This function defines state 0: Default State." alt="" coords="188,107,279,133"><area shape="rect" href="a00032.html#e647770a880b2f57f210aaeb58b5ccf4" title="This function checks whether a sensor if active." alt="" coords="175,157,292,184"><area shape="rect" href="a00032.html#e960f26d1f6df6d487075ccb69ca5b49" title="This function defines state 3: Movement Touch State." alt="" coords="176,208,291,235"><area shape="rect" href="a00032.html#8381dd74c2f529168d12a9c266c376f9" title="This function updates Invalue." alt="" coords="181,259,285,285"><area shape="rect" href="a00032.html#fdfbcc5955efa378300cbac70a9ce696" title="This function defines state 5: Scroll State." alt="" coords="191,309,276,336"></map>
</div>

</div>
</div><p>
<a class="anchor" name="0905451249f7232009067289cab474d1"></a><!-- doxytag: member="sensors.c::adc_reader" ref="0905451249f7232009067289cab474d1" args="(U8 channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> adc_reader           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>channel</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function reads the chosen ADC channel. 
<p>
<dl compact><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Can be rewritten with an init. The wait must then also be rewritten to wait for ADSC clear.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>channel</em>&nbsp;</td><td>The channel to be read.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The value of the channel. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00480">480</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00101.html#l00152">Adc_get_8_bits_result</a>, <a class="el" href="a00101.html#l00107">Clear_adc_flag</a>, <a class="el" href="a00101.html#l00161">Enable_adc</a>, <a class="el" href="a00101.html#l00167">Is_adc_conv_finished</a>, <a class="el" href="a00101.html#l00114">Set_prescaler</a>, and <a class="el" href="a00101.html#l00133">Start_conv_channel</a>.</p>

<p>Referenced by <a class="el" href="a00109.html#l00080">mouse_task_init()</a>, and <a class="el" href="a00116.html#l00491">Read_sensors()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00480"></a>00480                           {
<a name="l00481"></a>00481    <a class="code" href="a00088.html#g8fef07ae087a5813da67345dc595e8e8">Clear_adc_flag</a>();
<a name="l00482"></a>00482    <a class="code" href="a00083.html#ge535dd293c26671cb72ad817cd5cdd38">Enable_adc</a>();
<a name="l00483"></a>00483    <a class="code" href="a00089.html#g70a3cc8fcd89467d9343947460b7de4e">Set_prescaler</a>(6);
<a name="l00484"></a>00484    <a class="code" href="a00092.html#g475231bf3d583e9758af42c1c96ff501">Start_conv_channel</a>(channel); <span class="comment">// Normal conv. uses 13 clock cycles</span>
<a name="l00485"></a>00485    <span class="keywordflow">while</span>(!<a class="code" href="a00096.html#g40474849ccad21dd0f0d7454d5f28f76">Is_adc_conv_finished</a>()); <span class="comment">// Wait for ADC conv.</span>
<a name="l00486"></a>00486    <span class="keywordflow">return</span> <a class="code" href="a00094.html#g4159f766cae11b2d37f3237f0e09d1fd">Adc_get_8_bits_result</a>();
<a name="l00487"></a>00487 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_0905451249f7232009067289cab474d1_icgraph.png" border="0" usemap="#a00031_0905451249f7232009067289cab474d1_icgraph_map" alt=""></center>
<map name="a00031_0905451249f7232009067289cab474d1_icgraph_map">
<area shape="rect" href="a00058.html#ga17eb8d69237be42568e645d6452cb14" title="This function initializes the hardware/software resources required for mouse task..." alt="" coords="140,5,255,32"><area shape="rect" href="a00032.html#8381dd74c2f529168d12a9c266c376f9" title="This function updates Invalue." alt="" coords="145,56,249,83"></map>
</div>

</div>
</div><p>
<a class="anchor" name="8381dd74c2f529168d12a9c266c376f9"></a><!-- doxytag: member="sensors.c::Read_sensors" ref="8381dd74c2f529168d12a9c266c376f9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Read_sensors           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function updates <a class="el" href="a00031.html#48842f777afc873552e3370cef79ec5b" title="Read values of sensors, to be compared against the calibration values.">Invalue</a>. 
<p>

<p>Definition at line <a class="el" href="a00116.html#l00491">491</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00117.html#l00061">ADC_END_CHANNEL</a>, <a class="el" href="a00116.html#l00480">adc_reader()</a>, <a class="el" href="a00117.html#l00060">ADC_START_CHANNEL</a>, <a class="el" href="a00116.html#l00040">Invalue</a>, <a class="el" href="a00116.html#l00461">is_button_sensor()</a>, and <a class="el" href="a00116.html#l00436">is_movement_sensor()</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00078">is_mouse_event()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00491"></a>00491                         {
<a name="l00492"></a>00492    <a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor;
<a name="l00493"></a>00493    <span class="keywordflow">for</span>(sensor = <a class="code" href="a00032.html#5d672e9c49625a34829d15aafa6d3d40">ADC_START_CHANNEL</a>; sensor &lt;= <a class="code" href="a00032.html#90d02b0217fe30b09530ce65e66bcf38">ADC_END_CHANNEL</a>; sensor++) {
<a name="l00494"></a>00494       <span class="keywordflow">if</span>(<a class="code" href="a00031.html#674791a51be825a2da83277901b855a8" title="This function checks whether a sensor is a movement sensor.">is_movement_sensor</a>(sensor) || <a class="code" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor.">is_button_sensor</a>(sensor)) {
<a name="l00495"></a>00495          <a class="code" href="a00031.html#48842f777afc873552e3370cef79ec5b" title="Read values of sensors, to be compared against the calibration values.">Invalue</a>[sensor] = <a class="code" href="a00031.html#0905451249f7232009067289cab474d1" title="This function reads the chosen ADC channel.">adc_reader</a>(sensor);
<a name="l00496"></a>00496       }
<a name="l00497"></a>00497    }
<a name="l00498"></a>00498 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_8381dd74c2f529168d12a9c266c376f9_cgraph.png" border="0" usemap="#a00031_8381dd74c2f529168d12a9c266c376f9_cgraph_map" alt=""></center>
<map name="a00031_8381dd74c2f529168d12a9c266c376f9_cgraph_map">
<area shape="rect" href="a00031.html#0905451249f7232009067289cab474d1" title="This function reads the chosen ADC channel." alt="" coords="187,5,272,32"><area shape="rect" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor." alt="" coords="169,56,289,83"><area shape="rect" href="a00031.html#674791a51be825a2da83277901b855a8" title="This function checks whether a sensor is a movement sensor." alt="" coords="157,107,301,133"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_8381dd74c2f529168d12a9c266c376f9_icgraph.png" border="0" usemap="#a00031_8381dd74c2f529168d12a9c266c376f9_icgraph_map" alt=""></center>
<map name="a00031_8381dd74c2f529168d12a9c266c376f9_icgraph_map">
<area shape="rect" href="a00032.html#2f0bcb9627f1e230574ec5e01d14b175" title="This function checks the board interface and fills the HID mouse report." alt="" coords="157,5,272,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="c8ec403b244267ecd7c29fd6620076e3"></a><!-- doxytag: member="sensors.c::Calibrate" ref="c8ec403b244267ecd7c29fd6620076e3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Calibrate           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function updates <a class="el" href="a00031.html#c6a72d9ad60e64ca3bb25f0cbbb774eb" title="Calibration values of sensors (i.e., reference level).">Zerovalue</a> by copying <a class="el" href="a00031.html#48842f777afc873552e3370cef79ec5b" title="Read values of sensors, to be compared against the calibration values.">Invalue</a>. 
<p>
Remember to call <a class="el" href="a00032.html#8381dd74c2f529168d12a9c266c376f9" title="This function updates Invalue.">Read_sensors</a> to get fresh results. 
<p>Definition at line <a class="el" href="a00116.html#l00504">504</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00117.html#l00061">ADC_END_CHANNEL</a>, <a class="el" href="a00117.html#l00060">ADC_START_CHANNEL</a>, <a class="el" href="a00116.html#l00040">Invalue</a>, and <a class="el" href="a00116.html#l00037">Zerovalue</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00607">Check_hang()</a>, and <a class="el" href="a00116.html#l00140">Default_func()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00504"></a>00504                      {
<a name="l00505"></a>00505    <a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor;
<a name="l00506"></a>00506    <span class="keywordflow">for</span>(sensor = <a class="code" href="a00032.html#5d672e9c49625a34829d15aafa6d3d40">ADC_START_CHANNEL</a>; sensor &lt;= <a class="code" href="a00032.html#90d02b0217fe30b09530ce65e66bcf38">ADC_END_CHANNEL</a>; sensor++) {
<a name="l00507"></a>00507       <a class="code" href="a00024.html#c6a72d9ad60e64ca3bb25f0cbbb774eb" title="Reference level for steps, defined in sensors.c.">Zerovalue</a>[sensor] = <a class="code" href="a00031.html#48842f777afc873552e3370cef79ec5b" title="Read values of sensors, to be compared against the calibration values.">Invalue</a>[sensor];
<a name="l00508"></a>00508    }
<a name="l00509"></a>00509 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_c8ec403b244267ecd7c29fd6620076e3_icgraph.png" border="0" usemap="#a00031_c8ec403b244267ecd7c29fd6620076e3_icgraph_map" alt=""></center>
<map name="a00031_c8ec403b244267ecd7c29fd6620076e3_icgraph_map">
<area shape="rect" href="a00032.html#e17490447c5f3a64df8bf1485553dc08" title="This function re&#45;calibrates a hanging sensor by checking opposite cheek." alt="" coords="125,5,219,32"><area shape="rect" href="a00032.html#a7e99e80bf89549606e6fe10de83fde9" title="This function defines state 0: Default State." alt="" coords="127,56,217,83"></map>
</div>

</div>
</div><p>
<a class="anchor" name="66b43c3777dd3281045111a0da769b07"></a><!-- doxytag: member="sensors.c::is_sensor_step" ref="66b43c3777dd3281045111a0da769b07" args="(U8 sensor, U8 step)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit is_sensor_step           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>sensor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>step</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function checks whether a sensor's value is larger than a given step threshold, relative to <a class="el" href="a00031.html#c6a72d9ad60e64ca3bb25f0cbbb774eb" title="Calibration values of sensors (i.e., reference level).">Zerovalue</a>. 
<p>
Invalue[sensor] &gt; (Zerovalue[sensor] + step)<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sensor</em>&nbsp;</td><td>The sensor to be measured. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>step</em>&nbsp;</td><td>The step: <a class="el" href="a00032.html#70be2dc5c8bdc85b027ea6118753cca1">STEP</a>, <a class="el" href="a00032.html#d6138f70b4a60e8b031ce44d728a898d">STEP2</a>, ..., <a class="el" href="a00032.html#0855d9ea88a153808c46bb71684ff525">STEP6</a>.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if the value is larger. <p>
FALSE if not. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00522">522</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00116.html#l00040">Invalue</a>, and <a class="el" href="a00116.html#l00037">Zerovalue</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00628">Inc_speed()</a>, and <a class="el" href="a00116.html#l00536">is_sensor_active()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00522"></a>00522                                        {
<a name="l00523"></a>00523    <span class="keywordflow">return</span> (<a class="code" href="a00031.html#48842f777afc873552e3370cef79ec5b" title="Read values of sensors, to be compared against the calibration values.">Invalue</a>[sensor] &gt; (<a class="code" href="a00024.html#c6a72d9ad60e64ca3bb25f0cbbb774eb" title="Reference level for steps, defined in sensors.c.">Zerovalue</a>[sensor] + step));
<a name="l00524"></a>00524 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_66b43c3777dd3281045111a0da769b07_icgraph.png" border="0" usemap="#a00031_66b43c3777dd3281045111a0da769b07_icgraph_map" alt=""></center>
<map name="a00031_66b43c3777dd3281045111a0da769b07_icgraph_map">
<area shape="rect" href="a00032.html#3f0f020fe6f952f09853eae164d82745" title="This function checks sensor pressure for speed increase." alt="" coords="181,5,261,32"><area shape="rect" href="a00032.html#e647770a880b2f57f210aaeb58b5ccf4" title="This function checks whether a sensor if active." alt="" coords="163,56,280,83"></map>
</div>

</div>
</div><p>
<a class="anchor" name="e647770a880b2f57f210aaeb58b5ccf4"></a><!-- doxytag: member="sensors.c::is_sensor_active" ref="e647770a880b2f57f210aaeb58b5ccf4" args="(U8 sensor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit is_sensor_active           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>sensor</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function checks whether a sensor if active. 
<p>
Uses <a class="el" href="a00032.html#70be2dc5c8bdc85b027ea6118753cca1">STEP</a> for movement sensors and <a class="el" href="a00032.html#d6138f70b4a60e8b031ce44d728a898d">STEP2</a> for button sensors.<p>
Remember to call <a class="el" href="a00032.html#8381dd74c2f529168d12a9c266c376f9" title="This function updates Invalue.">Read_sensors</a> to get fresh results.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sensor</em>&nbsp;</td><td>The sensor to be checked.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if active. <p>
FALSE if not active. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00536">536</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00103.html#l00260">FALSE</a>, <a class="el" href="a00116.html#l00461">is_button_sensor()</a>, <a class="el" href="a00116.html#l00436">is_movement_sensor()</a>, <a class="el" href="a00116.html#l00522">is_sensor_step()</a>, <a class="el" href="a00117.html#l00065">STEP</a>, and <a class="el" href="a00117.html#l00066">STEP2</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00607">Check_hang()</a>, <a class="el" href="a00116.html#l00556">is_more_active()</a>, and <a class="el" href="a00116.html#l00187">Mov_count_func()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00536"></a>00536                                 {
<a name="l00537"></a>00537    <span class="keywordflow">if</span>(<a class="code" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor.">is_button_sensor</a>(sensor)) { <span class="comment">// Buttons cheek</span>
<a name="l00538"></a>00538       <span class="keywordflow">return</span> <a class="code" href="a00031.html#66b43c3777dd3281045111a0da769b07" title="This function checks whether a sensor&amp;#39;s value is larger than a given step threshold...">is_sensor_step</a>(sensor, <a class="code" href="a00032.html#d6138f70b4a60e8b031ce44d728a898d">STEP2</a>);
<a name="l00539"></a>00539    }
<a name="l00540"></a>00540    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="a00031.html#674791a51be825a2da83277901b855a8" title="This function checks whether a sensor is a movement sensor.">is_movement_sensor</a>(sensor)) { <span class="comment">// Movements cheek</span>
<a name="l00541"></a>00541       <span class="keywordflow">return</span> <a class="code" href="a00031.html#66b43c3777dd3281045111a0da769b07" title="This function checks whether a sensor&amp;#39;s value is larger than a given step threshold...">is_sensor_step</a>(sensor, <a class="code" href="a00032.html#70be2dc5c8bdc85b027ea6118753cca1">STEP</a>);
<a name="l00542"></a>00542    }
<a name="l00543"></a>00543    <span class="keywordflow">return</span> <a class="code" href="a00018.html#a93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l00544"></a>00544 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_e647770a880b2f57f210aaeb58b5ccf4_cgraph.png" border="0" usemap="#a00031_e647770a880b2f57f210aaeb58b5ccf4_cgraph_map" alt=""></center>
<map name="a00031_e647770a880b2f57f210aaeb58b5ccf4_cgraph_map">
<area shape="rect" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor." alt="" coords="183,5,303,32"><area shape="rect" href="a00031.html#674791a51be825a2da83277901b855a8" title="This function checks whether a sensor is a movement sensor." alt="" coords="171,56,315,83"><area shape="rect" href="a00031.html#66b43c3777dd3281045111a0da769b07" title="This function checks whether a sensor&#39;s value is larger than a given step threshold..." alt="" coords="188,107,297,133"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_e647770a880b2f57f210aaeb58b5ccf4_icgraph.png" border="0" usemap="#a00031_e647770a880b2f57f210aaeb58b5ccf4_icgraph_map" alt=""></center>
<map name="a00031_e647770a880b2f57f210aaeb58b5ccf4_icgraph_map">
<area shape="rect" href="a00032.html#e17490447c5f3a64df8bf1485553dc08" title="This function re&#45;calibrates a hanging sensor by checking opposite cheek." alt="" coords="181,5,275,32"><area shape="rect" href="a00032.html#35f3e8756189454e8a79ecb6ab01b247" title="This function checks which sensor is more active." alt="" coords="175,56,281,83"><area shape="rect" href="a00032.html#dbdce8d89d02f7a148d2b166d94eea9d" title="This function defines state 1: Movement Countdown State." alt="" coords="171,107,285,133"></map>
</div>

</div>
</div><p>
<a class="anchor" name="35f3e8756189454e8a79ecb6ab01b247"></a><!-- doxytag: member="sensors.c::is_more_active" ref="35f3e8756189454e8a79ecb6ab01b247" args="(U8 upper, U8 lower)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit is_more_active           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>upper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>lower</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function checks which sensor is more active. 
<p>
Remember to call <a class="el" href="a00032.html#8381dd74c2f529168d12a9c266c376f9" title="This function updates Invalue.">Read_sensors</a> to get fresh results.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>upper</em>&nbsp;</td><td>The sensor to be compared. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lower</em>&nbsp;</td><td>The sensor to compare against.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if upper is more active. <p>
FALSE otherwise. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00556">556</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00116.html#l00040">Invalue</a>, and <a class="el" href="a00116.html#l00536">is_sensor_active()</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00588">check_nearby_sensor()</a>, and <a class="el" href="a00116.html#l00568">find_active_sensor()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00556"></a>00556                                        {
<a name="l00557"></a>00557    <span class="keywordflow">return</span> ((<a class="code" href="a00031.html#48842f777afc873552e3370cef79ec5b" title="Read values of sensors, to be compared against the calibration values.">Invalue</a>[upper] &gt; <a class="code" href="a00031.html#48842f777afc873552e3370cef79ec5b" title="Read values of sensors, to be compared against the calibration values.">Invalue</a>[lower] &amp;&amp;
<a name="l00558"></a>00558             <a class="code" href="a00031.html#e647770a880b2f57f210aaeb58b5ccf4" title="This function checks whether a sensor if active.">is_sensor_active</a>(upper)));
<a name="l00559"></a>00559 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_35f3e8756189454e8a79ecb6ab01b247_cgraph.png" border="0" usemap="#a00031_35f3e8756189454e8a79ecb6ab01b247_cgraph_map" alt=""></center>
<map name="a00031_35f3e8756189454e8a79ecb6ab01b247_cgraph_map">
<area shape="rect" href="a00031.html#e647770a880b2f57f210aaeb58b5ccf4" title="This function checks whether a sensor if active." alt="" coords="163,5,280,32"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_35f3e8756189454e8a79ecb6ab01b247_icgraph.png" border="0" usemap="#a00031_35f3e8756189454e8a79ecb6ab01b247_icgraph_map" alt=""></center>
<map name="a00031_35f3e8756189454e8a79ecb6ab01b247_icgraph_map">
<area shape="rect" href="a00032.html#013506ab65ac6a2b6c4884caf7b409fa" title="This function returns an active nearby sensor, if any." alt="" coords="164,5,311,32"><area shape="rect" href="a00017.html#152ac983e3263151f7f5ddc22ba16184" title="This function runs through the read sensor values and returns the most active sensor..." alt="" coords="173,56,301,83"></map>
</div>

</div>
</div><p>
<a class="anchor" name="caca6743f95a33743918a890a7dcdccd"></a><!-- doxytag: member="sensors.c::find_active_sensor" ref="caca6743f95a33743918a890a7dcdccd" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> find_active_sensor           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function runs through the read sensor values and returns the most active sensor, if any. 
<p>
Remember to call <a class="el" href="a00032.html#8381dd74c2f529168d12a9c266c376f9" title="This function updates Invalue.">Read_sensors</a> to get fresh results.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The number of the active sensor, <a class="el" href="a00032.html#78ced0ef04bf38399a1a312575dc20a5">NO_SENSOR</a> if not found. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00568">568</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00315">Button_wait_func()</a>, <a class="el" href="a00116.html#l00140">Default_func()</a>, <a class="el" href="a00116.html#l00215">Mov_press_func()</a>, <a class="el" href="a00116.html#l00259">Mov_touch_func()</a>, and <a class="el" href="a00116.html#l00363">Scroll_func()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00568"></a>00568                             {
<a name="l00569"></a>00569    <a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> sensor = <a class="code" href="a00032.html#78ced0ef04bf38399a1a312575dc20a5">NO_SENSOR</a>;
<a name="l00570"></a>00570    <a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> i;
<a name="l00571"></a>00571    <span class="keywordflow">for</span>(i = <a class="code" href="a00032.html#5d672e9c49625a34829d15aafa6d3d40">ADC_START_CHANNEL</a>; i &lt;= <a class="code" href="a00032.html#90d02b0217fe30b09530ce65e66bcf38">ADC_END_CHANNEL</a>; i++) {
<a name="l00572"></a>00572       <span class="keywordflow">if</span>(<a class="code" href="a00031.html#35f3e8756189454e8a79ecb6ab01b247" title="This function checks which sensor is more active.">is_more_active</a>(i, sensor)) {
<a name="l00573"></a>00573          sensor = i;
<a name="l00574"></a>00574       }
<a name="l00575"></a>00575    }
<a name="l00576"></a>00576    <span class="keywordflow">return</span> sensor;
<a name="l00577"></a>00577 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_caca6743f95a33743918a890a7dcdccd_icgraph.png" border="0" usemap="#a00031_caca6743f95a33743918a890a7dcdccd_icgraph_map" alt=""></center>
<map name="a00031_caca6743f95a33743918a890a7dcdccd_icgraph_map">
<area shape="rect" href="a00032.html#f38325cb4a238445fadbe32d01dd0d4d" title="This function defines state 4: Button Wait State." alt="" coords="181,5,301,32"><area shape="rect" href="a00032.html#a7e99e80bf89549606e6fe10de83fde9" title="This function defines state 0: Default State." alt="" coords="196,56,287,83"><area shape="rect" href="a00032.html#55bdc319254e6ad2b98b2b988def4718" title="This function defines state 2: Movement Press State." alt="" coords="184,107,299,133"><area shape="rect" href="a00032.html#e960f26d1f6df6d487075ccb69ca5b49" title="This function defines state 3: Movement Touch State." alt="" coords="184,157,299,184"><area shape="rect" href="a00032.html#fdfbcc5955efa378300cbac70a9ce696" title="This function defines state 5: Scroll State." alt="" coords="199,208,284,235"></map>
</div>

</div>
</div><p>
<a class="anchor" name="013506ab65ac6a2b6c4884caf7b409fa"></a><!-- doxytag: member="sensors.c::check_nearby_sensor" ref="013506ab65ac6a2b6c4884caf7b409fa" args="(U8 sensor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> check_nearby_sensor           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>sensor</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function returns an active nearby sensor, if any. 
<p>
Remember to call <a class="el" href="a00032.html#8381dd74c2f529168d12a9c266c376f9" title="This function updates Invalue.">Read_sensors</a> to get fresh results.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sensor</em>&nbsp;</td><td>The sensor whose nearby sensors are to be checked.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The most active nearby sensor found. <p>
<a class="el" href="a00032.html#78ced0ef04bf38399a1a312575dc20a5">NO_SENSOR</a> if no nearby sensors are active. </dd></dl>

<p>Definition at line <a class="el" href="a00116.html#l00588">588</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00117.html#l00061">ADC_END_CHANNEL</a>, <a class="el" href="a00116.html#l00556">is_more_active()</a>, <a class="el" href="a00116.html#l00052">Nearby_sensors</a>, and <a class="el" href="a00117.html#l00037">NO_SENSOR</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00215">Mov_press_func()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00588"></a>00588                                   {
<a name="l00589"></a>00589    <a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> neighbor = <a class="code" href="a00032.html#78ced0ef04bf38399a1a312575dc20a5">NO_SENSOR</a>;
<a name="l00590"></a>00590    <a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> i;
<a name="l00591"></a>00591    <span class="keywordflow">for</span>(i = sensor + 1; i &lt;= <a class="code" href="a00032.html#90d02b0217fe30b09530ce65e66bcf38">ADC_END_CHANNEL</a>; i++) {
<a name="l00592"></a>00592       <span class="keywordflow">if</span>(<a class="code" href="a00031.html#d8076098b8685739db77e1ccbe58d8aa" title="Matrix of adjacent sensors.">Nearby_sensors</a>[sensor][i] &amp;&amp; <a class="code" href="a00031.html#35f3e8756189454e8a79ecb6ab01b247" title="This function checks which sensor is more active.">is_more_active</a>(i, neighbor)) {
<a name="l00593"></a>00593          neighbor = i;
<a name="l00594"></a>00594       }
<a name="l00595"></a>00595    }
<a name="l00596"></a>00596    <span class="keywordflow">return</span> neighbor;
<a name="l00597"></a>00597 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_013506ab65ac6a2b6c4884caf7b409fa_cgraph.png" border="0" usemap="#a00031_013506ab65ac6a2b6c4884caf7b409fa_cgraph_map" alt=""></center>
<map name="a00031_013506ab65ac6a2b6c4884caf7b409fa_cgraph_map">
<area shape="rect" href="a00031.html#35f3e8756189454e8a79ecb6ab01b247" title="This function checks which sensor is more active." alt="" coords="204,5,311,32"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_013506ab65ac6a2b6c4884caf7b409fa_icgraph.png" border="0" usemap="#a00031_013506ab65ac6a2b6c4884caf7b409fa_icgraph_map" alt=""></center>
<map name="a00031_013506ab65ac6a2b6c4884caf7b409fa_icgraph_map">
<area shape="rect" href="a00032.html#55bdc319254e6ad2b98b2b988def4718" title="This function defines state 2: Movement Press State." alt="" coords="203,5,317,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="e17490447c5f3a64df8bf1485553dc08"></a><!-- doxytag: member="sensors.c::Check_hang" ref="e17490447c5f3a64df8bf1485553dc08" args="(U8 sensor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Check_hang           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>sensor</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function re-calibrates a hanging sensor by checking opposite cheek. 
<p>
Doesn't do anything if passed <a class="el" href="a00032.html#78ced0ef04bf38399a1a312575dc20a5">NO_SENSOR</a>.<p>
Remember to call <a class="el" href="a00032.html#8381dd74c2f529168d12a9c266c376f9" title="This function updates Invalue.">Read_sensors</a> to get fresh results.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sensor</em>&nbsp;</td><td>The sensor to be checked. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="a00116.html#l00607">607</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00117.html#l00061">ADC_END_CHANNEL</a>, <a class="el" href="a00117.html#l00060">ADC_START_CHANNEL</a>, <a class="el" href="a00116.html#l00504">Calibrate()</a>, <a class="el" href="a00116.html#l00461">is_button_sensor()</a>, <a class="el" href="a00116.html#l00436">is_movement_sensor()</a>, and <a class="el" href="a00116.html#l00536">is_sensor_active()</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00215">Mov_press_func()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00607"></a>00607                            {
<a name="l00608"></a>00608    <a class="code" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> i;
<a name="l00609"></a>00609    <span class="keywordflow">for</span>(i = <a class="code" href="a00032.html#5d672e9c49625a34829d15aafa6d3d40">ADC_START_CHANNEL</a>; i &lt;= <a class="code" href="a00032.html#90d02b0217fe30b09530ce65e66bcf38">ADC_END_CHANNEL</a>; i++) {
<a name="l00610"></a>00610       <span class="keywordflow">if</span>(<a class="code" href="a00031.html#e647770a880b2f57f210aaeb58b5ccf4" title="This function checks whether a sensor if active.">is_sensor_active</a>(i) &amp;&amp;
<a name="l00611"></a>00611          ((<a class="code" href="a00031.html#674791a51be825a2da83277901b855a8" title="This function checks whether a sensor is a movement sensor.">is_movement_sensor</a>(sensor) &amp;&amp; <a class="code" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor.">is_button_sensor</a>(i)) ||
<a name="l00612"></a>00612           (<a class="code" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor.">is_button_sensor</a>(sensor) &amp;&amp; <a class="code" href="a00031.html#674791a51be825a2da83277901b855a8" title="This function checks whether a sensor is a movement sensor.">is_movement_sensor</a>(i)))) {
<a name="l00613"></a>00613 
<a name="l00614"></a>00614          <a class="code" href="a00031.html#c8ec403b244267ecd7c29fd6620076e3" title="This function updates Zerovalue by copying Invalue.">Calibrate</a>();
<a name="l00615"></a>00615          <span class="keywordflow">return</span>;
<a name="l00616"></a>00616       }
<a name="l00617"></a>00617    }
<a name="l00618"></a>00618 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_e17490447c5f3a64df8bf1485553dc08_cgraph.png" border="0" usemap="#a00031_e17490447c5f3a64df8bf1485553dc08_cgraph_map" alt=""></center>
<map name="a00031_e17490447c5f3a64df8bf1485553dc08_cgraph_map">
<area shape="rect" href="a00031.html#c8ec403b244267ecd7c29fd6620076e3" title="This function updates Zerovalue by copying Invalue." alt="" coords="169,5,241,32"><area shape="rect" href="a00031.html#f69836438397c47cde6e849fc2a158a6" title="This function checks whether a sensor is a button sensor." alt="" coords="324,81,444,108"><area shape="rect" href="a00031.html#674791a51be825a2da83277901b855a8" title="This function checks whether a sensor is a movement sensor." alt="" coords="312,144,456,171"><area shape="rect" href="a00031.html#e647770a880b2f57f210aaeb58b5ccf4" title="This function checks whether a sensor if active." alt="" coords="147,107,264,133"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_e17490447c5f3a64df8bf1485553dc08_icgraph.png" border="0" usemap="#a00031_e17490447c5f3a64df8bf1485553dc08_icgraph_map" alt=""></center>
<map name="a00031_e17490447c5f3a64df8bf1485553dc08_icgraph_map">
<area shape="rect" href="a00032.html#55bdc319254e6ad2b98b2b988def4718" title="This function defines state 2: Movement Press State." alt="" coords="147,5,261,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="3f0f020fe6f952f09853eae164d82745"></a><!-- doxytag: member="sensors.c::Inc_speed" ref="3f0f020fe6f952f09853eae164d82745" args="(U8 sensor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Inc_speed           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>sensor</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function checks sensor pressure for speed increase. 
<p>
If pressure &gt; <a class="el" href="a00032.html#b18e271c15239d703ae778766b25c5f5">STEP3</a>, ..., <a class="el" href="a00032.html#0855d9ea88a153808c46bb71684ff525">STEP6</a> (relative to <a class="el" href="a00031.html#c6a72d9ad60e64ca3bb25f0cbbb774eb" title="Calibration values of sensors (i.e., reference level).">Zerovalue</a>), call <a class="el" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report.">Modify_report()</a> to increase cursor speed.<p>
Remember to call <a class="el" href="a00032.html#8381dd74c2f529168d12a9c266c376f9" title="This function updates Invalue.">Read_sensors</a> to get fresh results.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sensor</em>&nbsp;</td><td>The sensor to be measured. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="a00116.html#l00628">628</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00116.html#l00522">is_sensor_step()</a>, <a class="el" href="a00116.html#l00648">Modify_report()</a>, <a class="el" href="a00117.html#l00067">STEP3</a>, <a class="el" href="a00117.html#l00068">STEP4</a>, <a class="el" href="a00117.html#l00069">STEP5</a>, and <a class="el" href="a00117.html#l00070">STEP6</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00215">Mov_press_func()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00628"></a>00628                           {
<a name="l00629"></a>00629    <span class="keywordflow">if</span>(<a class="code" href="a00031.html#66b43c3777dd3281045111a0da769b07" title="This function checks whether a sensor&amp;#39;s value is larger than a given step threshold...">is_sensor_step</a>(sensor, <a class="code" href="a00032.html#b18e271c15239d703ae778766b25c5f5">STEP3</a>)) {
<a name="l00630"></a>00630       <a class="code" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report.">Modify_report</a>(sensor);
<a name="l00631"></a>00631    }
<a name="l00632"></a>00632    <span class="keywordflow">if</span>(<a class="code" href="a00031.html#66b43c3777dd3281045111a0da769b07" title="This function checks whether a sensor&amp;#39;s value is larger than a given step threshold...">is_sensor_step</a>(sensor, <a class="code" href="a00032.html#43fdcab6f1ea325d70bc60eb117f394c">STEP4</a>)) {
<a name="l00633"></a>00633       <a class="code" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report.">Modify_report</a>(sensor);
<a name="l00634"></a>00634    }
<a name="l00635"></a>00635    <span class="keywordflow">if</span>(<a class="code" href="a00031.html#66b43c3777dd3281045111a0da769b07" title="This function checks whether a sensor&amp;#39;s value is larger than a given step threshold...">is_sensor_step</a>(sensor, <a class="code" href="a00032.html#6a5141a5b791207c196a290690e75652">STEP5</a>)) {
<a name="l00636"></a>00636       <a class="code" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report.">Modify_report</a>(sensor);
<a name="l00637"></a>00637    }
<a name="l00638"></a>00638    <span class="keywordflow">if</span>(<a class="code" href="a00031.html#66b43c3777dd3281045111a0da769b07" title="This function checks whether a sensor&amp;#39;s value is larger than a given step threshold...">is_sensor_step</a>(sensor, <a class="code" href="a00032.html#0855d9ea88a153808c46bb71684ff525">STEP6</a>)) {
<a name="l00639"></a>00639       <a class="code" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report.">Modify_report</a>(sensor);
<a name="l00640"></a>00640    }
<a name="l00641"></a>00641 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_3f0f020fe6f952f09853eae164d82745_cgraph.png" border="0" usemap="#a00031_3f0f020fe6f952f09853eae164d82745_cgraph_map" alt=""></center>
<map name="a00031_3f0f020fe6f952f09853eae164d82745_cgraph_map">
<area shape="rect" href="a00031.html#66b43c3777dd3281045111a0da769b07" title="This function checks whether a sensor&#39;s value is larger than a given step threshold..." alt="" coords="133,5,243,32"><area shape="rect" href="a00031.html#03f1a96bde8ea4ceca60f9eba847a16a" title="This function modifies g_hid_mouse_report." alt="" coords="139,56,237,83"></map>
</div>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_3f0f020fe6f952f09853eae164d82745_icgraph.png" border="0" usemap="#a00031_3f0f020fe6f952f09853eae164d82745_icgraph_map" alt=""></center>
<map name="a00031_3f0f020fe6f952f09853eae164d82745_icgraph_map">
<area shape="rect" href="a00032.html#55bdc319254e6ad2b98b2b988def4718" title="This function defines state 2: Movement Press State." alt="" coords="133,5,248,32"></map>
</div>

</div>
</div><p>
<a class="anchor" name="03f1a96bde8ea4ceca60f9eba847a16a"></a><!-- doxytag: member="sensors.c::Modify_report" ref="03f1a96bde8ea4ceca60f9eba847a16a" args="(U8 sensor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Modify_report           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>sensor</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function modifies <a class="el" href="a00031.html#90be438f7330dcc64cb9b12824967282" title="Mouse report, defined in mouse_task.c.">g_hid_mouse_report</a>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sensor</em>&nbsp;</td><td>The sensor whose corresponding action is to happen. If <a class="el" href="a00032.html#78ced0ef04bf38399a1a312575dc20a5">NO_SENSOR</a>, no action is taken. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="a00116.html#l00648">648</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>References <a class="el" href="a00117.html#l00042">DOWN_SENSOR</a>, <a class="el" href="a00117.html#l00028">Hid_mouse_report_click_left</a>, <a class="el" href="a00117.html#l00029">Hid_mouse_report_click_right</a>, <a class="el" href="a00117.html#l00021">Hid_mouse_report_down</a>, <a class="el" href="a00117.html#l00022">Hid_mouse_report_left</a>, <a class="el" href="a00117.html#l00023">Hid_mouse_report_right</a>, <a class="el" href="a00117.html#l00020">Hid_mouse_report_up</a>, <a class="el" href="a00117.html#l00044">LCLICK_SENSOR</a>, <a class="el" href="a00117.html#l00039">LEFT_SENSOR</a>, <a class="el" href="a00117.html#l00037">NO_SENSOR</a>, <a class="el" href="a00117.html#l00043">RCLICK_SENSOR</a>, <a class="el" href="a00117.html#l00041">RIGHT_SENSOR</a>, and <a class="el" href="a00117.html#l00038">UP_SENSOR</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00315">Button_wait_func()</a>, <a class="el" href="a00116.html#l00140">Default_func()</a>, <a class="el" href="a00116.html#l00628">Inc_speed()</a>, <a class="el" href="a00116.html#l00419">Maybe_left_holddown()</a>, <a class="el" href="a00116.html#l00187">Mov_count_func()</a>, <a class="el" href="a00116.html#l00215">Mov_press_func()</a>, and <a class="el" href="a00116.html#l00259">Mov_touch_func()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00648"></a>00648                               {
<a name="l00649"></a>00649    <span class="keywordflow">switch</span>(sensor) {
<a name="l00650"></a>00650       <span class="keywordflow">case</span> <a class="code" href="a00032.html#78ced0ef04bf38399a1a312575dc20a5">NO_SENSOR</a> : <span class="comment">// No action</span>
<a name="l00651"></a>00651          <span class="keywordflow">break</span>;
<a name="l00652"></a>00652 
<a name="l00653"></a>00653       <span class="keywordflow">case</span> <a class="code" href="a00032.html#64dba89518948116df90bc847597a8aa">UP_SENSOR</a> : <span class="comment">// PF1</span>
<a name="l00654"></a>00654          <a class="code" href="a00032.html#ca592558696861c5d30d817d7dbd9ce3">Hid_mouse_report_up</a>();
<a name="l00655"></a>00655          <span class="keywordflow">break</span>;
<a name="l00656"></a>00656 
<a name="l00657"></a>00657       <span class="keywordflow">case</span> <a class="code" href="a00032.html#a953bc212d4fe4274d23c0e9c2f5459f">LEFT_SENSOR</a> : <span class="comment">// PF2</span>
<a name="l00658"></a>00658          <a class="code" href="a00032.html#9a8134c73937e59b34940cffa6936bb3">Hid_mouse_report_left</a>();
<a name="l00659"></a>00659          <span class="keywordflow">break</span>;
<a name="l00660"></a>00660 
<a name="l00661"></a>00661       <span class="keywordflow">case</span> <a class="code" href="a00032.html#bbe9f6a700620d390c0c7706e1240d48">RIGHT_SENSOR</a> : <span class="comment">// PF4</span>
<a name="l00662"></a>00662          <a class="code" href="a00032.html#2f287b7fd7d40b5d73e7135abdc9f945">Hid_mouse_report_right</a>();
<a name="l00663"></a>00663          <span class="keywordflow">break</span>;
<a name="l00664"></a>00664 
<a name="l00665"></a>00665       <span class="keywordflow">case</span> <a class="code" href="a00032.html#332db1b59b10467f031e40272990e35e">DOWN_SENSOR</a> : <span class="comment">// PF5</span>
<a name="l00666"></a>00666          <a class="code" href="a00032.html#86eb00c37321910a023420324e69e196">Hid_mouse_report_down</a>();
<a name="l00667"></a>00667          <span class="keywordflow">break</span>;
<a name="l00668"></a>00668 
<a name="l00669"></a>00669       <span class="keywordflow">case</span> <a class="code" href="a00032.html#562cb1ec1ebc082a83b31baf6ec92d2e">RCLICK_SENSOR</a> : <span class="comment">// PF6</span>
<a name="l00670"></a>00670          <a class="code" href="a00032.html#e3a8b60b1e5019d3ad3c3ae3e027e39f">Hid_mouse_report_click_right</a>();
<a name="l00671"></a>00671          <span class="keywordflow">break</span>;
<a name="l00672"></a>00672 
<a name="l00673"></a>00673       <span class="keywordflow">case</span> <a class="code" href="a00032.html#e13a1cb039cbdec7ecc6c233ef3865a0">LCLICK_SENSOR</a> : <span class="comment">// PF7</span>
<a name="l00674"></a>00674          <a class="code" href="a00032.html#a017379c0ad4aab648b15c7f3bce6a82">Hid_mouse_report_click_left</a>();
<a name="l00675"></a>00675          <span class="keywordflow">break</span>;
<a name="l00676"></a>00676    }
<a name="l00677"></a>00677 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<p><center><img src="a00031_03f1a96bde8ea4ceca60f9eba847a16a_icgraph.png" border="0" usemap="#a00031_03f1a96bde8ea4ceca60f9eba847a16a_icgraph_map" alt=""></center>
<map name="a00031_03f1a96bde8ea4ceca60f9eba847a16a_icgraph_map">
<area shape="rect" href="a00032.html#f38325cb4a238445fadbe32d01dd0d4d" title="This function defines state 4: Button Wait State." alt="" coords="168,5,288,32"><area shape="rect" href="a00032.html#a7e99e80bf89549606e6fe10de83fde9" title="This function defines state 0: Default State." alt="" coords="183,56,273,83"><area shape="rect" href="a00032.html#3f0f020fe6f952f09853eae164d82745" title="This function checks sensor pressure for speed increase." alt="" coords="188,107,268,133"><area shape="rect" href="a00032.html#55bdc319254e6ad2b98b2b988def4718" title="This function defines state 2: Movement Press State." alt="" coords="349,132,464,159"><area shape="rect" href="a00032.html#89860b11fe875495bc114b044067a39d" title="This function holds down the left button if Left_holddown is TRUE." alt="" coords="156,208,300,235"><area shape="rect" href="a00032.html#dbdce8d89d02f7a148d2b166d94eea9d" title="This function defines state 1: Movement Countdown State." alt="" coords="171,259,285,285"><area shape="rect" href="a00032.html#e960f26d1f6df6d487075ccb69ca5b49" title="This function defines state 3: Movement Touch State." alt="" coords="171,309,285,336"></map>
</div>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="2ccc1fbc024e60b4049c657ce6bd7a35"></a><!-- doxytag: member="sensors.c::State" ref="2ccc1fbc024e60b4049c657ce6bd7a35" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">trigges ved å holde nede venstre museknapp Scroll trigges ved å holde nede høyre museknapp ikke bare den første Movement Countdown Movement Press Movement Touch <a class="el" href="a00017.html#2ccc1fbc024e60b4049c657ce6bd7a35">State</a> = DEFAULT_STATE          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
State variable, to memorize across tasks. 
<p>

<p>Definition at line <a class="el" href="a00116.html#l00017">17</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00315">Button_wait_func()</a>, <a class="el" href="a00116.html#l00140">Default_func()</a>, <a class="el" href="a00116.html#l00078">is_mouse_event()</a>, <a class="el" href="a00116.html#l00187">Mov_count_func()</a>, <a class="el" href="a00116.html#l00215">Mov_press_func()</a>, <a class="el" href="a00116.html#l00259">Mov_touch_func()</a>, and <a class="el" href="a00116.html#l00363">Scroll_func()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e3ca45f5ff481979b317a3b40983733b"></a><!-- doxytag: member="sensors.c::State_counter" ref="e3ca45f5ff481979b317a3b40983733b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00018.html#df928e51a60dba0df29d615401cc55a8">U16</a> <a class="el" href="a00031.html#e3ca45f5ff481979b317a3b40983733b">State_counter</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generic global counter to stay in a state a number of tasks. 
<p>
Remember to reset before changing state! 
<p>Definition at line <a class="el" href="a00116.html#l00021">21</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00315">Button_wait_func()</a>, <a class="el" href="a00116.html#l00140">Default_func()</a>, <a class="el" href="a00116.html#l00405">Maybe_slow_cursor()</a>, <a class="el" href="a00116.html#l00187">Mov_count_func()</a>, <a class="el" href="a00116.html#l00259">Mov_touch_func()</a>, and <a class="el" href="a00116.html#l00363">Scroll_func()</a>.</p>

</div>
</div><p>
<a class="anchor" name="43240271fe4632556d26ed52f17d8b2c"></a><!-- doxytag: member="sensors.c::Slow_cursor" ref="43240271fe4632556d26ed52f17d8b2c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit <a class="el" href="a00031.html#43240271fe4632556d26ed52f17d8b2c">Slow_cursor</a> = FALSE          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If <a class="el" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, cursor speed may be decreased by skipping tasks. 
<p>

<p>Definition at line <a class="el" href="a00116.html#l00024">24</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00140">Default_func()</a>, <a class="el" href="a00116.html#l00405">Maybe_slow_cursor()</a>, <a class="el" href="a00116.html#l00187">Mov_count_func()</a>, and <a class="el" href="a00116.html#l00259">Mov_touch_func()</a>.</p>

</div>
</div><p>
<a class="anchor" name="38eef1a947197d9e2517c1877aca50ca"></a><!-- doxytag: member="sensors.c::Left_holddown" ref="38eef1a947197d9e2517c1877aca50ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit <a class="el" href="a00031.html#38eef1a947197d9e2517c1877aca50ca">Left_holddown</a> = FALSE          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If <a class="el" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, the left mouse button is held down. 
<p>

<p>Definition at line <a class="el" href="a00116.html#l00027">27</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00315">Button_wait_func()</a>, <a class="el" href="a00116.html#l00140">Default_func()</a>, <a class="el" href="a00116.html#l00419">Maybe_left_holddown()</a>, and <a class="el" href="a00116.html#l00259">Mov_touch_func()</a>.</p>

</div>
</div><p>
<a class="anchor" name="21281dc357d62eae122bb6d780b25b13"></a><!-- doxytag: member="sensors.c::Report_filled" ref="21281dc357d62eae122bb6d780b25b13" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit <a class="el" href="a00031.html#21281dc357d62eae122bb6d780b25b13">Report_filled</a> = FALSE          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If <a class="el" href="a00018.html#a8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, there is a mouse event. 
<p>
This is the value returned by <a class="el" href="a00032.html#2f0bcb9627f1e230574ec5e01d14b175" title="This function checks the board interface and fills the HID mouse report.">is_mouse_event</a>. 
<p>Definition at line <a class="el" href="a00116.html#l00031">31</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00078">is_mouse_event()</a>, and <a class="el" href="a00116.html#l00419">Maybe_left_holddown()</a>.</p>

</div>
</div><p>
<a class="anchor" name="90be438f7330dcc64cb9b12824967282"></a><!-- doxytag: member="sensors.c::g_hid_mouse_report" ref="90be438f7330dcc64cb9b12824967282" args="[4]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00031.html#90be438f7330dcc64cb9b12824967282">g_hid_mouse_report</a>[4]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Mouse report, defined in <a class="el" href="a00024.html" title="This file manages the Mouse task.">mouse_task.c</a>. 
<p>

<p>Definition at line <a class="el" href="a00109.html#l00065">65</a> of file <a class="el" href="a00109.html">mouse_task.c</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00405">Maybe_slow_cursor()</a>, and <a class="el" href="a00109.html#l00113">mouse_task()</a>.</p>

</div>
</div><p>
<a class="anchor" name="c6a72d9ad60e64ca3bb25f0cbbb774eb"></a><!-- doxytag: member="sensors.c::Zerovalue" ref="c6a72d9ad60e64ca3bb25f0cbbb774eb" args="[8]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00031.html#c6a72d9ad60e64ca3bb25f0cbbb774eb">Zerovalue</a>[8] = {0}          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Calibration values of sensors (i.e., reference level). 
<p>
Reference level for steps, defined in <a class="el" href="a00031.html" title="This file contains all sensor code.">sensors.c</a>. 
<p>Definition at line <a class="el" href="a00116.html#l00037">37</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00504">Calibrate()</a>, <a class="el" href="a00116.html#l00522">is_sensor_step()</a>, and <a class="el" href="a00109.html#l00080">mouse_task_init()</a>.</p>

</div>
</div><p>
<a class="anchor" name="48842f777afc873552e3370cef79ec5b"></a><!-- doxytag: member="sensors.c::Invalue" ref="48842f777afc873552e3370cef79ec5b" args="[8]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00031.html#48842f777afc873552e3370cef79ec5b">Invalue</a>[8] = {0}          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read values of sensors, to be compared against the calibration values. 
<p>

<p>Definition at line <a class="el" href="a00116.html#l00040">40</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00504">Calibrate()</a>, <a class="el" href="a00116.html#l00556">is_more_active()</a>, <a class="el" href="a00116.html#l00522">is_sensor_step()</a>, and <a class="el" href="a00116.html#l00491">Read_sensors()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a3cb539a046895f24e2a0af5b0a8f195"></a><!-- doxytag: member="sensors.c::Active_sensor" ref="a3cb539a046895f24e2a0af5b0a8f195" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00031.html#a3cb539a046895f24e2a0af5b0a8f195">Active_sensor</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Number of currently active sensor. 
<p>

<p>Definition at line <a class="el" href="a00116.html#l00043">43</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00315">Button_wait_func()</a>, <a class="el" href="a00116.html#l00140">Default_func()</a>, <a class="el" href="a00116.html#l00187">Mov_count_func()</a>, <a class="el" href="a00116.html#l00215">Mov_press_func()</a>, <a class="el" href="a00116.html#l00259">Mov_touch_func()</a>, and <a class="el" href="a00116.html#l00363">Scroll_func()</a>.</p>

</div>
</div><p>
<a class="anchor" name="382ed155add7cd1d241a70201202e074"></a><!-- doxytag: member="sensors.c::Neighbor_sensor" ref="382ed155add7cd1d241a70201202e074" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00018.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> <a class="el" href="a00031.html#382ed155add7cd1d241a70201202e074">Neighbor_sensor</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Number of active neighbor sensor. 
<p>

<p>Definition at line <a class="el" href="a00116.html#l00046">46</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00140">Default_func()</a>, and <a class="el" href="a00116.html#l00215">Mov_press_func()</a>.</p>

</div>
</div><p>
<a class="anchor" name="d8076098b8685739db77e1ccbe58d8aa"></a><!-- doxytag: member="sensors.c::Nearby_sensors" ref="d8076098b8685739db77e1ccbe58d8aa" args="[8][8]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bit <a class="el" href="a00031.html#d8076098b8685739db77e1ccbe58d8aa">Nearby_sensors</a>[8][8]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {{0, 0, 0, 0, 0, 0, 0, 0},
                            {0, 0, 1, 0, 1, 0, 0, 0},
                            {0, 1, 0, 0, 0, 1, 0, 0},
                            {0, 0, 0, 0, 0, 0, 0, 0},
                            {0, 0, 1, 0, 0, 1, 0, 0},
                            {0, 0, 0, 0, 0, 0, 0, 0},
                            {0, 0, 0, 0, 0, 1, 0, 1},
                            {0, 0, 0, 0, 0, 1, 1, 0}}
</pre></div>Matrix of adjacent sensors. 
<p>
(PF0 and PF3 are temp. sensors and are disabled.) 
<p>Definition at line <a class="el" href="a00116.html#l00052">52</a> of file <a class="el" href="a00116.html">sensors.c</a>.</p>

<p>Referenced by <a class="el" href="a00116.html#l00588">check_nearby_sensor()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sun May 24 22:43:04 2009 for Virtual Arm for Impaired by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
